{"version":3,"file":"js/app.1252d683.js","mappings":"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","sources":["webpack://insect2/./src/utils/imageIdentifier.js","webpack://insect2/./src/store/index.js","webpack://insect2/./src/components/Header.vue","webpack://insect2/./src/components/Header.vue?801b","webpack://insect2/./src/components/UploadSection.vue","webpack://insect2/./src/components/UploadSection.vue?3954","webpack://insect2/./src/components/ResultSection.vue","webpack://insect2/./src/components/ResultSection.vue?4f0f","webpack://insect2/./src/components/KeyModal.vue","webpack://insect2/./src/components/KeyModal.vue?709e","webpack://insect2/./src/components/ServiceModal.vue","webpack://insect2/./src/components/ServiceModal.vue?d99a","webpack://insect2/./src/components/InsufficientModal.vue","webpack://insect2/./src/components/InsufficientModal.vue?6a32","webpack://insect2/./src/components/HistorySidebar.vue","webpack://insect2/./src/components/HistorySidebar.vue?c8ab","webpack://insect2/./src/App.vue","webpack://insect2/./src/App.vue?7ccd","webpack://insect2/./src/main.js","webpack://insect2/webpack/bootstrap","webpack://insect2/webpack/runtime/chunk loaded","webpack://insect2/webpack/runtime/compat get default export","webpack://insect2/webpack/runtime/define property getters","webpack://insect2/webpack/runtime/global","webpack://insect2/webpack/runtime/hasOwnProperty shorthand","webpack://insect2/webpack/runtime/make namespace object","webpack://insect2/webpack/runtime/jsonp chunk loading","webpack://insect2/webpack/startup"],"sourcesContent":["/**\r\n *  @author:andy\r\n *  @date 2025-06-04\r\n *  type:\r\n *  des:\r\n */\r\n// imageIdentifier.js\r\nimport axios from 'axios';\r\n\r\nconst CozeImageIdentifier = (() => {\r\n    // 内部状态变量\r\n    let chatId = '';\r\n    let conversationId = '';\r\n    let isIdentifying = false;\r\n    let answer = '';\r\n\r\n    // 配置参数（外部可修改）\r\n    const config = {\r\n        localServerBaseURL: '/api',\r\n        remoteServerURL: 'http://47.122.135.160:3000',\r\n        cozeFileUploadURL: 'https://api.coze.cn/v1/files/upload',\r\n        cozeChatURL: 'https://api.coze.cn/v3/chat',\r\n        botId: '7511906415587016723',\r\n        userId: '1024',\r\n        pollInterval: 2000,\r\n        maxPollAttempts: 90,\r\n        mobileCheckRegex: /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i\r\n    };\r\n\r\n    // 设置配置参数\r\n    const setConfig = (newConfig) => {\r\n        Object.assign(config, newConfig);\r\n    };\r\n\r\n    // 获取API基础URL\r\n   /* const getApiBase = () => {\r\n        const isLocalDev = process.env.NODE_ENV === 'development';\r\n        const isMobile = config.mobileCheckRegex.test(navigator.userAgent);\r\n            console.log(isMobile)\r\n        if (isLocalDev) {\r\n            return config.localServerBaseURL;\r\n        }\r\n\r\n        if (window.location.protocol.startsWith('http')) {\r\n            return `${window.location.protocol}//${window.location.host}${config.localServerBaseURL}`;\r\n        }\r\n\r\n        return `${config.remoteServerURL}${config.localServerBaseURL}`;\r\n    };*/\r\n\r\n    // 上传文件到本地服务器\r\n    /*const uploadToLocalServer = async (file, token) => {\r\n        const formData = new FormData();\r\n        formData.append('avatar', file);\r\n        console.log(token)\r\n        const apiBase = getApiBase();\r\n        const isMobile = config.mobileCheckRegex.test(navigator.userAgent);\r\n\r\n        const response = await axios.post(\r\n            `${apiBase}/upload`,\r\n            formData,\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                    'X-Client-Type': isMobile ? 'mobile' : 'web'\r\n                },\r\n                timeout: 30000\r\n            }\r\n        );\r\n\r\n        return {\r\n            localPath: response.data.path,\r\n            fullUrl: `${config.remoteServerURL}${response.data.path}`\r\n        };\r\n    };*/\r\n\r\n    // 上传文件到Coze\r\n    const uploadToCoze = async (file, token) => {\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n\r\n        const response = await axios.post(\r\n            config.cozeFileUploadURL,\r\n            formData,\r\n            {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            }\r\n        );\r\n\r\n        return response.data.data.id;\r\n    };\r\n\r\n    // 发送查询请求\r\n    const sendQuery = async (fileId, token) => {\r\n        const requestData = {\r\n            bot_id: config.botId,\r\n            user_id: config.userId,\r\n            stream: false,\r\n            auto_save_history: true,\r\n            additional_messages: [{\r\n                role: 'user',\r\n                content: JSON.stringify([{ type: 'image', file_id: fileId }]),\r\n                content_type: 'object_string'\r\n            }]\r\n        };\r\n\r\n        const response = await axios.post(\r\n            config.cozeChatURL,\r\n            requestData,\r\n            {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }\r\n        );\r\n\r\n        conversationId = response.data.data.conversation_id;\r\n        chatId = response.data.data.id;\r\n\r\n        return { conversationId, chatId };\r\n    };\r\n\r\n    // 轮询结果\r\n    const pollForResult = async (token) => {\r\n        const pollUrl = `${config.cozeChatURL}/retrieve?chat_id=${chatId}&conversation_id=${conversationId}`;\r\n        let status = 'in_progress';\r\n        let attempts = 0;\r\n\r\n        while (status === 'in_progress' && attempts < config.maxPollAttempts) {\r\n            await new Promise(resolve => setTimeout(resolve, config.pollInterval));\r\n\r\n            try {\r\n                const response = await axios.get(pollUrl, {\r\n                    headers: { Authorization: `Bearer ${token}` }\r\n                });\r\n\r\n                status = response.data.data.status;\r\n                attempts++;\r\n\r\n                if (status === 'completed') {\r\n                    return true;\r\n                }\r\n            } catch (error) {\r\n                console.error('轮询请求失败:', error);\r\n                attempts++;\r\n            }\r\n        }\r\n\r\n        throw new Error('轮询超时或识别未完成');\r\n    };\r\n\r\n    // 获取对话内容\r\n    const getConversationContent = async (token) => {\r\n        const contentUrl = `${config.cozeChatURL}/message/list?chat_id=${chatId}&conversation_id=${conversationId}`;\r\n\r\n        const response = await axios.get(contentUrl, {\r\n            headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n\r\n        let responseData = '';\r\n        console.log('1111111111111111111111');\r\n        console.log(response)\r\n        response.data.data.forEach(item => {\r\n            if (item.type === 'tool_response') {responseData += item.content;}\r\n            if (item.type === 'answer'){answer+=item.content;}\r\n        });\r\n\r\n        return responseData.replace(/null/g, '');\r\n    };\r\n\r\n    // 主识别函数\r\n    const identifyImage = async (file, token) => {\r\n        try {\r\n            isIdentifying = true;\r\n            console.log('1')\r\n            // 1. 上传到本地服务器（用于预览）\r\n          //  const localUpload = await uploadToLocalServer(file, token);\r\n            console.log('2')\r\n            // 2. 上传到Coze获取文件ID\r\n            const fileId = await uploadToCoze(file, token);\r\n            console.log('3')\r\n            // 3. 发送查询请求\r\n            await sendQuery(fileId, token);\r\n            console.log('4')\r\n            // 4. 轮询结果\r\n            await pollForResult(token);\r\n            console.log('5')\r\n            // 5. 获取对话内容\r\n            const content = await getConversationContent(token);\r\n\r\n            console.log('6')\r\n\r\n            return {\r\n                success: true,\r\n               /* previewUrl: localUpload.fullUrl,*/\r\n                previewUrl:'',\r\n                analysisResult: content,\r\n                answer:answer\r\n            };\r\n        } catch (error) {\r\n            console.error('识别过程出错:', error);\r\n            return {\r\n                success: false,\r\n                error: error.message || '图像识别失败'\r\n            };\r\n        } finally {\r\n            isIdentifying = false;\r\n        }\r\n    };\r\n\r\n    return {\r\n        identifyImage,\r\n        setConfig,\r\n        getStatus: () => ({ isIdentifying })\r\n    };\r\n})();\r\n\r\nexport default CozeImageIdentifier;","/* global MathJax */\r\nimport { defineStore } from 'pinia';\r\nimport CozeImageIdentifier from '@/utils/imageIdentifier';\r\nimport { nextTick } from 'vue';\r\n\r\nexport const useAppStore = defineStore('app', {\r\n    state: () => ({\r\n        // 积分相关状态\r\n        points: 100, // 默认值，实际值从localStorage加载\r\n        parseCost: 10,\r\n        userId: '',\r\n        showKeyModal: false,\r\n        secretKey: '',\r\n        showKey: false,\r\n\r\n        // 图片识别相关状态\r\n        imageUrl: null,\r\n        result: '',\r\n        formattedResult: '',\r\n        isProcessing: false,\r\n        processingTime: 0,\r\n        showServiceModal: false,\r\n        showInsufficientModal: false,\r\n        formulaRendered: false,\r\n        token: 'pat_8tA94A3g2TAoVwPdCJBZvfqrB5EExHQqp42uGvDKPdXyN2WGdadcd3wFy1th6LvB',\r\n        workflow_id:'7514867340287197195',\r\n        imgFile: null,\r\n        errorMessage: '',\r\n        isHistoryLoaded: false,\r\n        // 示例结果\r\n        sampleResults: [\r\n            \" \",\r\n            \" \",\r\n            \" \"\r\n        ],\r\n        redeemedKeys: JSON.parse(localStorage.getItem('redeemedKeys')) || [],\r\n        keyUsageHistory: [],\r\n        // 新增历史记录相关状态\r\n        history: (() => {\r\n            try {\r\n                const historyData = localStorage.getItem('mathSolverHistory');\r\n                // 检查有效数据\r\n                if (historyData && historyData !== 'undefined' && historyData !== 'null') {\r\n                    return JSON.parse(historyData);\r\n                }\r\n                return [];\r\n            } catch (e) {\r\n                console.error('历史记录解析错误', e);\r\n                return [];\r\n            }\r\n        })(),\r\n\r\n        showHistorySidebar:false,\r\n        activeHistory:null,\r\n\r\n        // 淘宝链接配置\r\n        taobaoLinks: {\r\n            100: 'https://taobao.com/item1',\r\n            200: 'https://taobao.com/item2',\r\n            500: 'https://taobao.com/item3',\r\n            1000: 'https://taobao.com/item4'\r\n        }\r\n    }),\r\n    actions: {\r\n\r\n        // 初始化用户ID和设备绑定\r\n        initUserId() {\r\n            let id = localStorage.getItem('user_id');\r\n            if (!id) {\r\n                // 生成基于设备信息的唯一ID\r\n                id = 'user_' + Math.random().toString(36).substring(2, 12) +\r\n                    Date.now().toString(36);\r\n                localStorage.setItem('user_id', id);\r\n            }\r\n            this.userId = id;\r\n\r\n            // 加载保存的积分 - 关键修复点\r\n            const savedPoints = localStorage.getItem(`points_${id}`);\r\n\r\n            if (savedPoints !== null) {\r\n                this.points = parseInt(savedPoints, 10);  // 确保转换为数字\r\n                console.log(`从 localStorage 加载积分: ${this.points}`);\r\n            } else {\r\n                // 首次使用，设置默认积分并保存\r\n                this.points = 100;\r\n                localStorage.setItem(`points_${id}`, '100');\r\n                console.log(`初始化积分: ${this.points}`);\r\n            }\r\n        },\r\n\r\n        // 添加设备唯一标识\r\n        getDeviceId() {\r\n            let deviceId = localStorage.getItem('deviceId');\r\n            if (!deviceId) {\r\n                deviceId = 'device_' + crypto.randomUUID();\r\n                localStorage.setItem('deviceId', deviceId);\r\n            }\r\n            return deviceId;\r\n        },\r\n\r\n        // 修改积分增减方法，添加服务器同步\r\n        async addPoints(amount) {\r\n            try {\r\n                // 先更新本地状态\r\n                this.points += amount;\r\n                localStorage.setItem(`points_${this.userId}`, this.points.toString());\r\n\r\n                // 同步到服务器\r\n                await fetch('https://your-api-domain.com/points', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${this.token}`\r\n                    },\r\n                    body: JSON.stringify({\r\n                        userId: this.userId,\r\n                        deviceId: this.getDeviceId(),\r\n                        points: this.points,\r\n                        operation: 'add',\r\n                        amount\r\n                    })\r\n                });\r\n            } catch (error) {\r\n                console.error('积分同步失败:', error);\r\n            }\r\n        },\r\n\r\n        // 消费积分并持久化\r\n        consumePoints(amount) {\r\n            if (this.points >= amount) {\r\n                this.points -= amount;\r\n                // 确保立即保存到localStorage\r\n                localStorage.setItem(`points_${this.userId}`, this.points.toString());\r\n                console.log(`积分消费: ${amount}, 剩余积分: ${this.points}, 保存到 localStorage`);\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n\r\n        // 图片识别相关方法\r\n        initMathJax() {\r\n            if (window.MathJax) {\r\n                window.MathJax = {\r\n                    tex: {\r\n                        inlineMath: [['$', '$'], ['\\\\(', '\\\\)']],\r\n                        displayMath: [['$$', '$$'], ['\\\\[', '\\\\]']],\r\n                        processEscapes: true,\r\n                        processEnvironments: true\r\n                    },\r\n                    options: {\r\n                        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],\r\n                        ignoreHtmlClass: 'tex2jax_ignore'\r\n                    },\r\n                    startup: {\r\n                        typeset: false\r\n                    },\r\n                    svg: {\r\n                        fontCache: 'global'\r\n                    }\r\n                };\r\n            }\r\n        },\r\n\r\n        processImageFile(file) {\r\n            if (!file.type.match('image.*')) {\r\n                alert('请上传图片文件！');\r\n                return false;\r\n            }\r\n\r\n            if (file.size > 5 * 1024 * 1024) {\r\n                alert('图片大小不能超过5MB！');\r\n                return false;\r\n            }\r\n\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                this.imageUrl = e.target.result;\r\n            };\r\n            reader.readAsDataURL(file);\r\n\r\n            // 保存文件对象\r\n            this.imgFile = file;\r\n            this.isHistoryLoaded = false; // 重置状态\r\n            return true;\r\n        },\r\n\r\n        async parseImage() {\r\n            console.log('00000011111111----1')\r\n            // 检查是否有有效的图片文件\r\n            if (!this.imgFile) {\r\n                this.errorMessage = '请先上传有效的图片文件';\r\n                return;\r\n            }\r\n            console.log('00000011111111----2')\r\n            /*if (this.points < this.parseCost) {\r\n                this.showInsufficientModal = true;\r\n                return;\r\n            }*/\r\n            console.log('000000111111111')\r\n            // 重置状态\r\n            this.isProcessing = true;\r\n            this.result = \"\";\r\n            this.formattedResult = \"\";\r\n            this.formulaRendered = false;\r\n            this.errorMessage = \"\";\r\n            this.processingTime = 5;\r\n\r\n          /*  // 消耗积分 - 使用新的consumePoints方法\r\n            const consumed = this.consumePoints(this.parseCost);\r\n            if (!consumed) {\r\n                this.isProcessing = false;\r\n                return;\r\n            }*/\r\n\r\n            // 设置处理计时器\r\n            const timer = setInterval(() => {\r\n                this.processingTime--;\r\n                if (this.processingTime <= 0) {\r\n                    clearInterval(timer);\r\n                }\r\n            }, 1000);\r\n\r\n            try {\r\n                const result = await CozeImageIdentifier.identifyImage(this.imgFile, this.token);\r\n\r\n                if (result.success) {\r\n                    try {\r\n\r\n                        const parsedResult = JSON.parse(result.analysisResult);\r\n\r\n                        // 新增：检查 output 数组长度\r\n                        if (!parsedResult.output || parsedResult.output.length === 0) {\r\n                            // 显示错误提示信息\r\n                            this.formattedResult = `\r\n                        <div class=\"error-prompt\">\r\n                            <!--<div class=\"error-icon\">\r\n                                <i class=\"fas fa-exclamation-triangle\"></i>\r\n                            </div>-->\r\n                            <div class=\"error-content\">\r\n                               <i class=\"fas fa-exclamation-triangle\"></i> ${\"很遗憾，暂时未能识别出图片中的习题信息，无法为你提供答案与解析。你可以检查图片是否清晰、完整，以便我更好地为你解答。 \"|| '未从图片中识别到具体的习题内容，你可以检查图片是否清晰完整！'}\r\n                            </div>\r\n                        </div>\r\n                    `;\r\n                            this.result = result.answer;\r\n                            return; // 提前返回\r\n                        }\r\n\r\n\r\n\r\n                        // 优化后的题目展示模板\r\n                        this.formattedResult = parsedResult.output.map((item, index) => {\r\n                            // 状态颜色配置\r\n                            const statusColors = {\r\n                                answered: item.answered ? '#52c41a' : '#ff4d4f',\r\n                                correct: item.isCorrect ? '#52c41a' : '#ff4d4f',\r\n                                neutral: '#94a3b8'\r\n                            };\r\n                            console.log(index);\r\n                            // 答案显示样式 - 根据作答状态动态变化\r\n                            const answerStyle = item.answered\r\n                                ? `color: ${item.isCorrect ? statusColors.correct : statusColors.answered}; font-weight: 600;`\r\n                                : `color: ${statusColors.neutral};`;\r\n\r\n                            // 选项格式化（如果有选项）\r\n                            const optionsHtml = item.options ? Object.entries(item.options)\r\n                                .map(([key, value]) => `\r\n<div class=\"option-item\">\r\n    <span class=\"option-key\">${key}.</span>\r\n    <span class=\"option-value\">${value}</span>\r\n</div>`)\r\n                                .join('') : '';\r\n\r\n                            return `\r\n<div class=\"exercise-card\">\r\n    <!-- 头部：题号+题干 -->\r\n    <div class=\"exercise-header\">\r\n        <div class=\"question-title\">${item.question}</div>\r\n    </div>\r\n    \r\n    <!-- 选项区域 -->\r\n    ${optionsHtml ? `\r\n    <div class=\"options-container\">\r\n        ${optionsHtml}\r\n    </div>` : ''}\r\n    \r\n    <!-- 答案区域 -->\r\n    <div class=\"answer-container\">\r\n        <div class=\"answer-label\">参考答案：</div>\r\n        <div class=\"answer-content\" style=\"${answerStyle}\">\r\n            ${item.answer || '无答案信息'}\r\n        </div>\r\n    </div>\r\n    \r\n    <!-- 状态区域 -->\r\n    <div class=\"status-container\">\r\n        <div class=\"status-item ${item.answered ? 'status-correct' : 'status-incorrect'}\">\r\n            <span class=\"status-label\">作答状态：</span>\r\n            <span class=\"status-value\">\r\n                ${item.answered ? '✓ 已作答' : '✗ 未作答'}\r\n            </span>\r\n        </div>\r\n        \r\n        <div class=\"status-item ${item.isCorrect ? 'status-correct' : 'status-incorrect'}\">\r\n            <span class=\"status-label\">结果判定：</span>\r\n            <span class=\"status-value\">\r\n                ${item.isCorrect ? '✓ 正确' : '✗ 错误'}\r\n            </span>\r\n        </div>\r\n    </div>\r\n    \r\n    <!-- 解析区域 -->\r\n    <div class=\"analysis-container\">\r\n        <div class=\"analysis-label\">题目解析</div>\r\n        <div class=\"analysis-content\">${item.analysis || '暂无解析内容'}</div>\r\n    </div>\r\n</div>\r\n`;\r\n                        }).join('');\r\n\r\n\r\n\r\n                        // 设置结果并渲染公式\r\n                        this.result = parsedResult;\r\n                        await this.renderMathJax();\r\n\r\n                    } catch (jsonError) {\r\n                        console.error('JSON解析失败:', jsonError);\r\n                        this.handleParseError('结果解析错误');\r\n                    }\r\n\r\n                } else {\r\n                    console.error('识别失败:', result.error);\r\n                    this.errorMessage = result.error || '图片识别失败，请重试';\r\n\r\n                    // 使用示例结果作为备选\r\n                    const randomIndex = Math.floor(Math.random() * this.sampleResults.length);\r\n                    this.result = this.sampleResults[randomIndex];\r\n                    this.formattedResult = this.result.replace(/\\n/g, '<br>');\r\n                }\r\n            } catch (error) {\r\n                console.error('解析过程中发生错误:', error);\r\n                this.errorMessage = `解析失败: ${error.message || '未知错误'}`;\r\n\r\n                // 使用示例结果作为备选\r\n                const randomIndex = Math.floor(Math.random() * this.sampleResults.length);\r\n                this.result = this.sampleResults[randomIndex];\r\n                this.formattedResult = this.result.replace(/\\n/g, '<br>');\r\n            } finally {\r\n                // 无论成功与否，都结束处理状态\r\n                this.isProcessing = false;\r\n                clearInterval(timer);\r\n            }\r\n        },\r\n\r\n        // 新增辅助方法\r\n        async renderMathJax() {\r\n            await nextTick();\r\n            if (window.MathJax) {\r\n                try {\r\n                    MathJax.typesetClear();\r\n                    await MathJax.typesetPromise();\r\n                    this.formulaRendered = true;\r\n                } catch (mathError) {\r\n                    console.error('MathJax渲染错误:', mathError);\r\n                    this.formulaRendered = false;\r\n                    this.errorMessage = '公式渲染失败，但内容已显示';\r\n                }\r\n            }\r\n        },\r\n\r\n        // 错误处理方法\r\n        handleParseError(errorMsg) {\r\n            this.errorMessage = errorMsg;\r\n            this.formattedResult = `\r\n        <div style=\"color: #f5222d; padding: 16px; background: #fff2f0; border: 1px solid #ffccc7;\">\r\n            ${errorMsg}，已显示示例结果\r\n        </div>\r\n    ` + this.sampleResults.join('<br>');\r\n\r\n            this.renderMathJax();\r\n        },\r\n\r\n        // 密钥管理\r\n        saveKey() {\r\n            if (this.secretKey) {\r\n                localStorage.setItem('mathAppSecretKey', this.secretKey);\r\n                alert('秘钥已保存');\r\n                this.showKeyModal = false;\r\n            } else {\r\n                alert('请输入秘钥');\r\n            }\r\n        },\r\n\r\n        // 复制微信客服\r\n        copyWechat() {\r\n            navigator.clipboard.writeText('MathSolver_Service')\r\n                .then(() => {\r\n                    alert('微信客服账号已复制到剪贴板');\r\n                })\r\n                .catch(err => {\r\n                    console.error('复制失败:', err);\r\n                    alert('复制失败，请手动复制');\r\n                });\r\n        },\r\n\r\n        // 跳转到淘宝\r\n        openTaobao() {\r\n            window.open('https://www.taobao.com', '_blank');\r\n        },\r\n\r\n        // 购买积分套餐 - 跳转到对应的淘宝链接\r\n        buyPoints(points) {\r\n            const url = this.taobaoLinks[points] || 'https://www.taobao.com';\r\n            window.open(url, '_blank');\r\n        },\r\n\r\n        // 兑换积分 - 实际验证需要后端API\r\n        // store/index.js 修改validateKey方法\r\n        async validateKey(key) {\r\n            try {\r\n                const response = await fetch('https://your-api-domain.com/redeem', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${this.token}`\r\n                    },\r\n                    body: JSON.stringify({\r\n                        key,\r\n                        userId: this.userId,\r\n                        deviceId: this.getDeviceId()\r\n                    })\r\n                });\r\n\r\n                const data = await response.json();\r\n\r\n                if (data.success) {\r\n                    return { valid: true, points: data.points };\r\n                } else {\r\n                    return { valid: false, error: data.error || '兑换失败' };\r\n                }\r\n            } catch (error) {\r\n                console.error('秘钥验证失败:', error);\r\n                return {\r\n                    valid: false,\r\n                    error: '网络错误，请稍后重试'\r\n                };\r\n            }\r\n        },\r\n\r\n        async validateKeyNew (key){\r\n            try {\r\n                const response = await fetch('https://api.coze.cn/v1/workflow/run', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        Authorization: `Bearer ${this.token}`,\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                        workflow_id: this.workflow_id,\r\n                        parameters: {\r\n                            input: key,\r\n                        }\r\n                    })\r\n                });\r\n\r\n                console.log('...............hhhhhh....................');\r\n                console.log(response);\r\n                console.log('.....................gggggggg.........');\r\n\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`API request failed with status ${response.status}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                console.log('API response:', data);\r\n\r\n                var currentObj = {};\r\n                try{\r\n                    console.log('data.data:::'+data.data);\r\n                    const outputJson = JSON.parse(data.data);\r\n                    console.log('data.data.output:::'+outputJson);\r\n                    console.log('output::'+outputJson.output)\r\n                    if(outputJson.output.length>0){\r\n                        currentObj.valid = true;\r\n                        currentObj.points = parseFloat(outputJson.output[0].key_points);\r\n                    }else{\r\n                        currentObj.valid = false;\r\n                    }\r\n                    console.log('data.data.output.length:::'+outputJson.output.length);\r\n                }catch (e) { console.log(e)}\r\n                console.log('currentObj:', currentObj);\r\n                return currentObj;\r\n            } catch (error) {\r\n                console.error('API调用失败:', error);\r\n                throw error; // 抛出错误供调用方处理\r\n            }\r\n\r\n        },\r\n\r\n\r\n\r\n        // 新增：添加到历史记录\r\n       async addToHistory (item) {\r\n           // 压缩图像数据（如果过大）\r\n           if (item.imageUrl && item.imageUrl.length > 500000) {\r\n               item.imageUrl = await this.compressImage(item.imageUrl);\r\n           }\r\n\r\n           // 确保history是数组\r\n           if (!Array.isArray(this.history)) {\r\n               this.history = [];\r\n           }\r\n\r\n           // 限制历史记录数量（最多20条）\r\n            if (this.history.length >= 20) {\r\n                this.history.pop()\r\n            }\r\n\r\n            // 压缩图像数据（如果过大）\r\n            if (item.imageUrl && item.imageUrl.length > 500000) { // 大于500KB\r\n                item.imageUrl = this.compressImage(item.imageUrl)\r\n            }\r\n\r\n            this.history.unshift(item)\r\n            this.saveHistoryToLocalStorage()\r\n        },\r\n         // 添加图像压缩函数\r\n        // 添加图像压缩函数\r\n        compressImage(dataUrl) {\r\n            return new Promise((resolve) => {\r\n                const img = new Image();\r\n                img.onload = function() {\r\n                    const canvas = document.createElement('canvas');\r\n                    const ctx = canvas.getContext('2d');\r\n\r\n                    // 设置最大尺寸\r\n                    const maxWidth = 800;\r\n                    const maxHeight = 600;\r\n                    let width = img.width;\r\n                    let height = img.height;\r\n\r\n                    if (width > height) {\r\n                        if (width > maxWidth) {\r\n                            height *= maxWidth / width;\r\n                            width = maxWidth;\r\n                        }\r\n                    } else {\r\n                        if (height > maxHeight) {\r\n                            width *= maxHeight / height;\r\n                            height = maxHeight;\r\n                        }\r\n                    }\r\n\r\n                    canvas.width = width;\r\n                    canvas.height = height;\r\n                    ctx.drawImage(img, 0, 0, width, height);\r\n\r\n                    // 降低质量\r\n                    resolve(canvas.toDataURL('image/jpeg', 0.7));\r\n                };\r\n                img.src = dataUrl;\r\n            });\r\n        },\r\n\r\n\r\n        // 新增：删除历史记录\r\n        removeHistory (id) {\r\n            // 添加保护性检查\r\n            if (!Array.isArray(this.history)) {\r\n                this.history = [];\r\n            }\r\n            this.history = this.history.filter(item => item.id !== id)\r\n            if (this.activeHistory === id) {\r\n                this.activeHistory = null\r\n            }\r\n            this.saveHistoryToLocalStorage();\r\n        },\r\n\r\n        // 新增：加载历史记录\r\n        loadHistory (item) {\r\n            this.activeHistory = item.id\r\n            this.imageUrl = item.imageUrl\r\n            this.result = item.result\r\n            this.formattedResult = item.formattedResult\r\n            this.formulaRendered = true\r\n            this.isHistoryLoaded = true; // 标记为历史记录加载\r\n        },\r\n        // 保存历史记录到本地存储\r\n        saveHistoryToLocalStorage (){\r\n            localStorage.setItem('mathSolverHistory', JSON.stringify(this.history))\r\n        },\r\n        async loadKeyHistory() {\r\n            try {\r\n                const response = await fetch(`https://your-api-domain.com/key-history?userId=${this.userId}`);\r\n                this.keyUsageHistory = await response.json();\r\n            } catch (error) {\r\n                console.error('加载秘钥历史失败:', error);\r\n            }\r\n        },\r\n\r\n        saveRedeemedKey(key) {\r\n            this.redeemedKeys.push({\r\n                key,\r\n                date: new Date().toISOString(),\r\n                points: this.lastRedeemedPoints\r\n            });\r\n            localStorage.setItem('redeemedKeys', JSON.stringify(this.redeemedKeys));\r\n        }\r\n    },\r\n\r\n    // 初始化\r\n    init() {\r\n        this.initUserId();\r\n        this.initMathJax();\r\n\r\n        // 加载保存的密钥\r\n        const savedKey = localStorage.getItem('mathAppSecretKey');\r\n        if (savedKey) {\r\n            this.secretKey = savedKey;\r\n        }\r\n    }\r\n});\r\n\r\n/*\r\n// 创建store后立即初始化\r\nconst appStore = useAppStore();\r\nif (!appStore.userId) {\r\n    appStore.init();\r\n} else {\r\n    console.log('Store 已初始化');\r\n}*/\r\nsetInterval(async () => {\r\n    try {\r\n        const response = await fetch(`https://your-api-domain.com/points?userId=${this.userId}`);\r\n        const { points } = await response.json();\r\n\r\n        if (points !== this.points) {\r\n            console.warn('积分不一致，同步服务器状态');\r\n            this.points = points;\r\n            localStorage.setItem(`points_${this.userId}`, points.toString());\r\n        }\r\n    } catch (error) {\r\n        console.error('定期同步失败:', error);\r\n    }\r\n}, 5 * 60 * 1000); // 每5分钟同步一次","<!-- eslint-disable vue/multi-word-component-names -->\r\n<template>\r\n    <div class=\"header\">\r\n        <div class=\"logo-container\">\r\n            <div class=\"logo\">\r\n                <i class=\"fas fa-calculator\"></i>\r\n\r\n            </div>\r\n            <div class=\"log-flag\">\r\n                <h1>\r\n                    AI智能习题解析系统\r\n                </h1>\r\n                <p>上传习题图片，获取详细解析与答案，支持复杂数学公式渲染</p>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<style scoped>\r\n    .header {\r\n        text-align: center;\r\n        margin-bottom: 5px;\r\n        position: relative;\r\n\r\n    }\r\n\r\n    .logo-container {\r\n        width: max-content;\r\n        display: flex;\r\n        justify-content: center;\r\n        margin-bottom: 5px;\r\n    }\r\n\r\n    .logo {\r\n        width: 70px;\r\n        height: 70px;\r\n        background: linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%);\r\n        border-radius: 50%;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        color: white;\r\n        font-size: 2.3rem;\r\n        box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);\r\n    }\r\n\r\n    .header h1 {\r\n        color: #f8fafc;\r\n        font-size: 1.4rem;\r\n        margin-bottom: 10px;\r\n        font-weight: 700;\r\n        letter-spacing: 0.5px;\r\n       /* background: linear-gradient(90deg, #38bdf8, #818cf8);*/\r\n        -webkit-background-clip: text;\r\n        background-clip: inherit;\r\n\r\n    }\r\n\r\n    .header p {\r\n        color: #94a3b8;\r\n        font-size: 0.8rem;\r\n        max-width: 600px;\r\n        margin: 0 auto;\r\n        line-height: 1.6;\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n        .header h1 {\r\n            font-size: 2rem;\r\n        }\r\n    }\r\n    .log-flag{\r\n        text-align: left;\r\n        padding-left: 15px;\r\n    }\r\n    /* 移动端标题优化 */\r\n    @media (max-width: 768px) {\r\n        .logo-container {\r\n            flex-direction: column;\r\n            align-items: center;\r\n            text-align: center;\r\n        }\r\n\r\n        .log-flag {\r\n            padding-left: 0;\r\n            margin-top: 10px;\r\n        }\r\n\r\n        .logo {\r\n            width: 60px;\r\n            height: 60px;\r\n            font-size: 1.8rem;\r\n        }\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n        .logo {\r\n            width: 50px;\r\n            height: 50px;\r\n            font-size: 1.8rem;\r\n            display: none;\r\n        }\r\n\r\n        .header h1 {\r\n            text-align: left;\r\n            font-size: 1.1rem;\r\n            margin-bottom: 5px;\r\n        }\r\n\r\n        .header p {\r\n            font-size: 0.7rem;\r\n            max-width: 90vw;\r\n        }\r\n\r\n        .logo-container {\r\n            flex-direction: column;\r\n            align-items: center;\r\n        }\r\n\r\n        .log-flag {\r\n            padding-left: 0;\r\n            text-align: center;\r\n            margin-top: 10px;\r\n        }\r\n    }\r\n</style>","import { render } from \"./Header.vue?vue&type=template&id=425bd800&scoped=true\"\nconst script = {}\n\nimport \"./Header.vue?vue&type=style&index=0&id=425bd800&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-425bd800\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"upload-container\">\r\n        <div class=\"upload-header\">\r\n            <i class=\"fas fa-cloud-upload-alt\"></i> 上传习题图片\r\n        </div>\r\n        <div class=\"upload-content\">\r\n            <div\r\n                    class=\"upload-area\"\r\n                    @click=\"triggerFileInput\"\r\n                    @dragover.prevent\r\n                    @drop=\"handleDrop\"\r\n            >\r\n                <div v-if=\"!store.imageUrl\">\r\n                    <div class=\"upload-icon\">\r\n                        <i class=\"fas fa-cloud-upload-alt\"></i>\r\n                    </div>\r\n                    <div class=\"upload-text\">\r\n                        <h3>点击或拖拽上传图片</h3>\r\n                        <p>支持 JPG、PNG 格式，大小不超过 5MB</p>\r\n                        <div v-if=\"isMobile\" class=\"camera-tip\">\r\n                            <i class=\"fas fa-camera\"></i> 支持直接拍照上传\r\n                        </div>\r\n                    </div>\r\n                    <button class=\"upload-btn\">选择图片</button>\r\n                </div>\r\n\r\n                <div v-else class=\"preview-container\">\r\n                    <!-- 移除了图片的点击事件，只保留上传功能 -->\r\n                    <img :src=\"store.imageUrl\"\r\n                         alt=\"习题预览\"\r\n                         class=\"preview-image\">\r\n                    <!-- 添加上传新习题提示 -->\r\n                    <div class=\"upload-new-prompt\" @click.stop=\"triggerFileInput\">\r\n                        <i class=\"fas fa-plus-circle\"></i>\r\n                        <span>上传新习题图片</span>\r\n                    </div>\r\n                    <!-- 放大按钮 - 现在是唯一的放大触发点 -->\r\n                    <button class=\"zoom-button\" @click.stop=\"toggleZoom\">\r\n                        <i :class=\"['fas', isZoomed ? 'fa-search-minus' : 'fa-search-plus']\"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"parse-btn-container\">\r\n            <button\r\n                    class=\"parse-btn\"\r\n                    @click=\"store.parseImage()\"\r\n                    :disabled=\"!store.imageUrl || store.isProcessing\"\r\n            >\r\n                <i class=\"fas fa-cogs\"></i>\r\n                {{ store.isProcessing ? '解析中...' : '解析习题' }}\r\n            </button>\r\n        </div>\r\n        <input\r\n                type=\"file\"\r\n                id=\"fileInput\"\r\n                accept=\"image/*\"\r\n                capture=\"camera\"\r\n                style=\"display: none\"\r\n                @change=\"handleImageUpload\"\r\n        >\r\n    </div>\r\n\r\n    <!-- 遮罩层 - 显示原始尺寸图片 -->\r\n    <div v-if=\"isZoomed\" class=\"image-overlay\" @click.self=\"isZoomed = false\">\r\n        <div class=\"zoomed-container\">\r\n            <!-- 移除了图片的点击事件 -->\r\n            <img :src=\"store.imageUrl\"\r\n                 alt=\"放大预览\"\r\n                 class=\"original-size-image\"\r\n                 :style=\"{ transform: `scale(${scale})` }\">\r\n            <button class=\"close-button\" @click=\"isZoomed = false\">\r\n                <i class=\"fas fa-times\"></i>\r\n            </button>\r\n\r\n            <!-- 图片操作按钮 -->\r\n            <div class=\"image-controls\">\r\n                <button @click=\"zoomOut\" :disabled=\"scale <= 0.5\">\r\n                    <i class=\"fas fa-search-minus\"></i>\r\n                </button>\r\n                <span>{{ Math.round(scale * 100) }}%</span>\r\n                <button @click=\"zoomIn\" :disabled=\"scale >= 3\">\r\n                    <i class=\"fas fa-search-plus\"></i>\r\n                </button>\r\n                <button @click=\"resetZoom\">\r\n                    <i class=\"fas fa-sync-alt\"></i> 重置\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    // 检测移动端\r\n    const isMobile = ref(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\r\n    import { useAppStore } from '../store'\r\n    import { ref,onMounted } from 'vue'\r\n\r\n    const store = useAppStore()\r\n    const isZoomed = ref(false);\r\n    const scale = ref(1.0); // 缩放比例\r\n    onMounted(() => {\r\n        if (navigator.mediaDevices) {\r\n            console.log(\"摄像头支持已启用\");\r\n        }\r\n    });\r\n    const toggleZoom = () => {\r\n        isZoomed.value = !isZoomed.value;\r\n        if (isZoomed.value) {\r\n            // 进入放大模式时重置缩放比例\r\n            scale.value = 1.0;\r\n        }\r\n    }\r\n\r\n    const zoomIn = () => {\r\n        if (scale.value < 3) {\r\n            scale.value += 0.1;\r\n        }\r\n    }\r\n\r\n    const zoomOut = () => {\r\n        if (scale.value > 0.5) {\r\n            scale.value -= 0.1;\r\n        }\r\n    }\r\n\r\n    const resetZoom = () => {\r\n        scale.value = 1.0;\r\n    }\r\n\r\n    let file = null;\r\n    const triggerFileInput = () => {\r\n        console.log('111111111111111111111111111');\r\n        console.log('233333333333333333333333333');\r\n        document.getElementById('fileInput').click()\r\n    }\r\n\r\n    const handleImageUpload = (event) => {\r\n        file = event.target.files[0];\r\n        store.imgFile = file;\r\n        if (file) {\r\n            store.processImageFile(file)\r\n        }\r\n    }\r\n\r\n    const handleDrop = (event) => {\r\n        event.preventDefault()\r\n        const file = event.dataTransfer.files[0]\r\n        if (file) {\r\n            store.processImageFile(file)\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .upload-container {\r\n        background: rgba(30, 41, 59, 0.6);\r\n        border-radius: 16px;\r\n        padding: 0;\r\n        overflow: hidden;\r\n        border: 1px solid rgba(94, 234, 212, 0.1);\r\n        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .upload-header {\r\n        padding: 18px 25px;\r\n        background: rgba(15, 23, 42, 0.7);\r\n        border-bottom: 1px solid rgba(94, 234, 212, 0.1);\r\n        display: flex;\r\n        align-items: center;\r\n        font-weight: 600;\r\n        color: #e2e8f0;\r\n        font-size: 1.1rem;\r\n    }\r\n\r\n    .upload-header i {\r\n        margin-right: 12px;\r\n        color: #38bdf8;\r\n    }\r\n\r\n    .upload-content {\r\n        padding: 30px;\r\n        text-align: center;\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        position: relative;\r\n    }\r\n\r\n    .upload-area {\r\n        border: 2px dashed rgba(94, 234, 212, 0.3);\r\n        border-radius: 12px;\r\n        padding: 30px;\r\n        transition: all 0.3s;\r\n        background: rgba(15, 23, 42, 0.3);\r\n        cursor: pointer;\r\n        position: relative;\r\n        min-height: 250px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        flex: 1;\r\n        /*新优化*/\r\n        max-height: calc(100vh - 420px); /* 动态限制最大高度 */\r\n        overflow: hidden; /* 防止内容溢出 */\r\n    }\r\n\r\n    .upload-area:hover {\r\n        border-color: #38bdf8;\r\n        background: rgba(56, 189, 248, 0.1);\r\n    }\r\n\r\n    .upload-icon {\r\n        font-size: 3.5rem;\r\n        color: #38bdf8;\r\n        margin-bottom: 20px;\r\n        transition: transform 0.3s;\r\n    }\r\n\r\n    .upload-area:hover .upload-icon {\r\n        transform: translateY(-5px);\r\n    }\r\n\r\n    .upload-text h3 {\r\n        font-size: 1.4rem;\r\n        color: #f8fafc;\r\n        margin-bottom: 12px;\r\n    }\r\n\r\n    .upload-text p {\r\n        color: #94a3b8;\r\n        margin-bottom: 25px;\r\n        font-size: 0.95rem;\r\n    }\r\n\r\n    .upload-btn {\r\n        background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%);\r\n        color: white;\r\n        border: none;\r\n        padding: 12px 35px;\r\n        border-radius: 30px;\r\n        font-size: 1rem;\r\n        cursor: pointer;\r\n        transition: all 0.3s;\r\n        font-weight: 500;\r\n        box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);\r\n    }\r\n\r\n    .upload-btn:hover {\r\n        background: linear-gradient(135deg, #0284c7 0%, #4f46e5 100%);\r\n        box-shadow: 0 6px 20px rgba(14, 165, 233, 0.4);\r\n        transform: translateY(-2px);\r\n    }\r\n\r\n    .preview-container {\r\n        margin: 20px 0 0;\r\n        text-align: center;\r\n        max-height: 500px;\r\n        overflow: hidden;\r\n        border-radius: 12px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background: #000;\r\n        position: relative;\r\n        width: 100%;\r\n        height: 100%;\r\n        /*新优化*/\r\n        max-height: calc(100vh - 540px); /* 动态限制图片容器高度 */\r\n        overflow: auto; /* 允许内容滚动 */\r\n    }\r\n\r\n    .preview-image {\r\n        height: 100%;\r\n        max-width: 100%;\r\n        /* max-height: 280px;*/\r\n        display: block;\r\n        transition: transform 0.3s;\r\n        cursor: zoom-in;\r\n        /*  max-height: 270px;*/\r\n        /*新优化*/\r\n        max-height: 100%; /* 图片高度不超过容器 */\r\n        width: auto; /* 保持宽高比 */\r\n    }\r\n\r\n    .preview-image:hover {\r\n        transform: scale(1.02);\r\n    }\r\n\r\n    .parse-btn-container {\r\n        text-align: center;\r\n        padding: 20px;\r\n        background: rgba(15, 23, 42, 0.5);\r\n        border-top: 1px solid rgba(94, 234, 212, 0.1);\r\n    }\r\n\r\n    .parse-btn {\r\n        background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);\r\n        color: white;\r\n        border: none;\r\n        padding: 16px 45px;\r\n        border-radius: 30px;\r\n        font-size: 1.1rem;\r\n        cursor: pointer;\r\n        transition: all 0.3s;\r\n        font-weight: 600;\r\n        box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);\r\n        position: relative;\r\n        overflow: hidden;\r\n        width: 100%;\r\n        max-width: 400px;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .parse-btn::after {\r\n        content: \"\";\r\n        position: absolute;\r\n        top: -50%;\r\n        left: -50%;\r\n        width: 200%;\r\n        height: 200%;\r\n        background: linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0.1));\r\n        transform: rotate(30deg);\r\n        transition: all 0.6s;\r\n    }\r\n\r\n    .parse-btn:hover {\r\n        transform: translateY(-3px);\r\n        box-shadow: 0 10px 25px rgba(139, 92, 246, 0.5);\r\n    }\r\n\r\n    .parse-btn:hover::after {\r\n        transform: rotate(30deg) translate(10%, 30%);\r\n    }\r\n\r\n    .parse-btn:disabled {\r\n        background: #475569;\r\n        cursor: not-allowed;\r\n        transform: none;\r\n        box-shadow: none;\r\n    }\r\n\r\n    .parse-btn:disabled::after {\r\n        display: none;\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n        .upload-content {\r\n            padding: 20px 15px;\r\n        }\r\n\r\n        .parse-btn {\r\n            width: 100%;\r\n            max-width: 300px;\r\n        }\r\n\r\n        .preview-container {\r\n            max-height: 200px;\r\n        }\r\n\r\n        .preview-image {\r\n            max-height: 200px;\r\n        }\r\n    }\r\n\r\n    /* =============== 放大预览相关样式 =============== */\r\n    .zoom-button {\r\n        position: absolute;\r\n        top: 12px;\r\n        right: 12px;\r\n        width: 36px;\r\n        height: 36px;\r\n        border-radius: 50%;\r\n        background: rgba(0, 0, 0, 0.5);\r\n        border: none;\r\n        color: white;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        cursor: pointer;\r\n        transition: background 0.2s;\r\n        z-index: 10;\r\n    }\r\n\r\n    .zoom-button:hover {\r\n        background: rgba(0, 0, 0, 0.8);\r\n    }\r\n\r\n    .image-overlay {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: rgba(0, 0, 0, 0.95);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        z-index: 1000;\r\n        overflow: auto; /* 允许滚动查看大图 */\r\n    }\r\n\r\n    .zoomed-container {\r\n        position: relative;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        padding: 50px 20px;\r\n        max-width: 100%;\r\n    }\r\n\r\n    /* 原始尺寸图片，允许放大缩小 */\r\n    .original-size-image {\r\n        max-width: 100%;\r\n        cursor: zoom-out;\r\n        transition: transform 0.3s ease;\r\n        transform: scale(v-bind(scale));\r\n        box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);\r\n    }\r\n\r\n    .close-button {\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 20px;\r\n        background: rgba(0, 0, 0, 0.7);\r\n        border: 2px solid rgba(255, 255, 255, 0.3);\r\n        color: white;\r\n        width: 45px;\r\n        height: 45px;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        cursor: pointer;\r\n        font-size: 1.2rem;\r\n        z-index: 1010;\r\n        transition: all 0.3s;\r\n    }\r\n\r\n    .close-button:hover {\r\n        background: rgba(200, 0, 0, 0.8);\r\n        transform: rotate(90deg);\r\n    }\r\n\r\n    /* 图片控制按钮 */\r\n    .image-controls {\r\n        position: fixed;\r\n        bottom: 30px;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        background: rgba(0, 0, 0, 0.7);\r\n        border-radius: 30px;\r\n        padding: 10px 20px;\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 15px;\r\n        z-index: 1010;\r\n        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    .image-controls button {\r\n        background: rgba(56, 189, 248, 0.3);\r\n        color: white;\r\n        border: 1px solid rgba(94, 234, 212, 0.3);\r\n        padding: 8px 15px;\r\n        border-radius: 20px;\r\n        cursor: pointer;\r\n        transition: all 0.3s;\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 5px;\r\n    }\r\n\r\n    .image-controls button:hover:not(:disabled) {\r\n        background: rgba(56, 189, 248, 0.6);\r\n        transform: translateY(-2px);\r\n    }\r\n\r\n    .image-controls button:disabled {\r\n        opacity: 0.5;\r\n        cursor: not-allowed;\r\n    }\r\n\r\n    .image-controls span {\r\n        color: white;\r\n        font-weight: 500;\r\n        min-width: 60px;\r\n        text-align: center;\r\n    }\r\n\r\n    /* 响应式调整 */\r\n    @media (max-width: 768px) {\r\n        .image-controls {\r\n            bottom: 15px;\r\n            padding: 8px 15px;\r\n            gap: 10px;\r\n        }\r\n\r\n        .image-controls button {\r\n            padding: 6px 10px;\r\n            font-size: 0.9rem;\r\n        }\r\n\r\n        .image-controls span {\r\n            min-width: 50px;\r\n        }\r\n    }\r\n    .preview-image {\r\n        cursor: default; /* 将光标改为默认，表明不可点击 */\r\n    }\r\n\r\n    .preview-image:hover {\r\n        transform: none; /* 移除悬停缩放效果 */\r\n    }\r\n\r\n    .zoom-button {\r\n        /* 放大按钮样式保持不变 */\r\n    }\r\n    /* 新增：上传新习题提示样式 */\r\n    .upload-new-prompt {\r\n        position: absolute;\r\n        bottom: 20px;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        background: rgba(56, 189, 248, 0.85);\r\n        color: white;\r\n        padding: 10px 20px;\r\n        border-radius: 30px;\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n        cursor: pointer;\r\n        transition: all 0.3s;\r\n        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\r\n        z-index: 20;\r\n    }\r\n\r\n    .upload-new-prompt:hover {\r\n        background: rgba(14, 165, 233, 0.95);\r\n        transform: translateX(-50%) translateY(-2px);\r\n        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    .upload-new-prompt i {\r\n        font-size: 1.2rem;\r\n    }\r\n\r\n    /* 其他原有样式保持不变 */\r\n    .upload-container {\r\n        background: rgba(30, 41, 59, 0.6);\r\n        border-radius: 16px;\r\n        padding: 0;\r\n        overflow: hidden;\r\n        border: 1px solid rgba(94, 234, 212, 0.1);\r\n        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n    /* 移动端上传区域优化 */\r\n    @media (max-width: 768px) {\r\n        .upload-content {\r\n            padding: 15px;\r\n        }\r\n\r\n        .upload-area {\r\n            min-height: 200px;\r\n            padding: 20px;\r\n        }\r\n\r\n        .preview-container {\r\n            max-height: 40vh;\r\n        }\r\n\r\n        .upload-new-prompt {\r\n            font-size: 0.8rem;\r\n            padding: 8px 15px;\r\n        }\r\n    }\r\n\r\n    /* 移动端优化 */\r\n    @media (max-width: 768px) {\r\n        .upload-container{\r\n            min-height: 380px;\r\n            height: 380px;\r\n        }\r\n        .upload-header {\r\n            display:none;\r\n            padding: 12px 20px;\r\n            font-size: 1rem;\r\n        }\r\n\r\n        .upload-content {\r\n            padding: 20px 10px;\r\n        }\r\n\r\n        .upload-area {\r\n            min-height: 180px;\r\n            padding: 20px;\r\n        }\r\n\r\n        .upload-icon {\r\n            font-size: 2.5rem;\r\n        }\r\n\r\n        .upload-text h3 {\r\n            font-size: 1.2rem;\r\n        }\r\n\r\n        .upload-btn {\r\n            padding: 10px 25px;\r\n        }\r\n\r\n        .preview-container {\r\n            max-height: 35vh;\r\n        }\r\n\r\n        .parse-btn {\r\n            padding: 12px 30px;\r\n            font-size: 1rem;\r\n        }\r\n\r\n        .upload-new-prompt {\r\n            font-size: 0.8rem;\r\n            padding: 8px 15px;\r\n        }\r\n\r\n        /* 摄像头提示 */\r\n        .camera-tip {\r\n            text-align: center;\r\n            color: #38bdf8;\r\n            margin-top: 10px;\r\n            font-size: 0.9rem;\r\n        }\r\n        .upload-icon{\r\n            display: none;\r\n        }\r\n    }\r\n</style>","import script from \"./UploadSection.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./UploadSection.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./UploadSection.vue?vue&type=style&index=0&id=248900c7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-248900c7\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"action-section\">\r\n        <div class=\"result-section\">\r\n            <h2 class=\"result-title\"><i class=\"fas fa-file-alt\"></i> 解析结果</h2>\r\n            <div class=\"result-content\">\r\n                <div v-if=\"store.isProcessing\" class=\"loading\">\r\n                    <div class=\"spinner\"></div>\r\n                    <p>正在使用AI解析习题中，请稍候...</p>\r\n                    <p v-if=\"store.processingTime > 0\">剩余时间: {{ store.processingTime }}秒</p>\r\n                </div>\r\n                <div v-else-if=\"store.result\">\r\n                    <div class=\"formula-status\" v-if=\"store.formulaRendered\">\r\n                        <i class=\"fas fa-check-circle\"></i> 公式已渲染\r\n                        <i class=\"fas fa-copy copy-icon\" @click=\"copyMathContent\"></i>\r\n                    </div>\r\n                    <div class=\"exercise-results-container\" id=\"mathResult\" v-html=\"store.formattedResult\" ref=\"mathContainer\"></div>\r\n                </div>\r\n              <!--  <div v-else class=\"math-container\">\r\n                    <p>解析结果将显示在这里</p>\r\n                    <p>请先上传习题图片并点击\"解析习题\"按钮</p>\r\n                    <p>支持数学公式、物理公式、化学方程式等</p>\r\n                </div>-->\r\n            </div>\r\n\r\n            <!-- 保存状态提示 -->\r\n          <!--  <div class=\"save-btn-container\" v-if=\"store.result && !store.isProcessing\" >\r\n                <div v-if=\"showSaveStatus\" class=\"save-status\" :class=\"saveStatusClass\">\r\n                    <i :class=\"saveStatusIcon\"></i> {{ saveStatusMessage }}\r\n                </div>\r\n            </div>-->\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { useAppStore } from '../store'\r\n    import { ref, watch } from 'vue'\r\n\r\n    const store = useAppStore()\r\n    const mathContainer = ref(null)\r\n\r\n    // 保存状态相关变量\r\n    const showSaveStatus = ref(false)\r\n    const saveStatusMessage = ref('')\r\n    const saveStatusClass = ref('')\r\n    const saveStatusIcon = ref('')\r\n\r\n    // 监听解析状态变化，当解析完成时自动保存\r\n    watch(\r\n        () => store.isProcessing,\r\n        (isProcessing, wasProcessing) => {\r\n            // 当从处理中变为完成时自动保存\r\n            if (wasProcessing && !isProcessing && store.result) {\r\n                saveResult()\r\n            }\r\n        }\r\n    )\r\n\r\n    const copyMathContent = () => {\r\n        if (!mathContainer.value) return\r\n\r\n        try {\r\n            // 创建临时textarea元素用于复制\r\n            const textarea = document.createElement('textarea')\r\n\r\n            // 提取纯文本内容（不含HTML标签）\r\n            const textContent = mathContainer.value.textContent || ''\r\n            textarea.value = textContent\r\n\r\n            // 添加到DOM中（不可见）\r\n            textarea.style.position = 'fixed'\r\n            textarea.style.opacity = 0\r\n            document.body.appendChild(textarea)\r\n\r\n            // 选择并复制文本\r\n            textarea.select()\r\n            document.execCommand('copy')\r\n\r\n            // 清理\r\n            document.body.removeChild(textarea)\r\n\r\n            // 显示成功反馈\r\n            showCopyFeedback()\r\n        } catch (error) {\r\n            console.error('复制失败:', error)\r\n            alert('复制失败，请手动选择内容复制')\r\n        }\r\n    }\r\n\r\n    const showCopyFeedback = () => {\r\n        const icon = document.querySelector('.copy-icon')\r\n        if (icon) {\r\n            // 临时改变图标和颜色\r\n            icon.classList.remove('fa-copy')\r\n            icon.classList.add('fa-check')\r\n            icon.style.color = '#52c41a'\r\n\r\n            // 2秒后恢复原状\r\n            setTimeout(() => {\r\n                icon.classList.remove('fa-check')\r\n                icon.classList.add('fa-copy')\r\n                icon.style.color = ''\r\n            }, 2000)\r\n        }\r\n    }\r\n\r\n    // 保存结果到历史记录\r\n    const saveResult = () => {\r\n        if (store.result) {\r\n            try {\r\n                // 添加到历史记录\r\n                store.addToHistory({\r\n                    id: Date.now(),\r\n                    imageUrl: store.imageUrl,\r\n                    result: store.result,\r\n                    formattedResult: store.formattedResult,\r\n                    timestamp: Date.now()\r\n                })\r\n\r\n                // 显示保存成功状态\r\n                showSaveStatus.value = true\r\n                saveStatusMessage.value = '解析结果已自动保存到历史记录'\r\n                saveStatusClass.value = 'save-success'\r\n                saveStatusIcon.value = 'fas fa-check-circle'\r\n\r\n            } catch (error) {\r\n                console.error('保存失败:', error)\r\n\r\n                // 显示保存失败状态\r\n                showSaveStatus.value = true\r\n                saveStatusMessage.value = '保存失败: ' + (error.message || '未知错误')\r\n                saveStatusClass.value = 'save-error'\r\n                saveStatusIcon.value = 'fas fa-exclamation-circle'\r\n            }\r\n\r\n            // 3秒后隐藏状态提示\r\n            setTimeout(() => {\r\n                showSaveStatus.value = false\r\n            }, 3000)\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .action-section {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 30px;\r\n    }\r\n\r\n    .result-section {\r\n        background: rgba(30, 41, 59, 0.6);\r\n        border-radius: 16px;\r\n        padding: 25px;\r\n        border: 1px solid rgba(94, 234, 212, 0.1);\r\n        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);\r\n        height: 100%;\r\n    }\r\n\r\n    .result-title {\r\n        font-size: 1.3rem;\r\n        color: #f8fafc;\r\n        margin-bottom: 20px;\r\n        display: flex;\r\n        align-items: center;\r\n        font-weight: 600;\r\n        padding-bottom: 15px;\r\n        border-bottom: 1px solid rgba(94, 234, 212, 0.1);\r\n    }\r\n\r\n    .result-title i {\r\n        margin-right: 12px;\r\n        color: #ec4899;\r\n    }\r\n\r\n    .result-content {\r\n        min-height: 300px;\r\n        padding: 25px 20px;\r\n        background: rgba(15, 23, 42, 0.4);\r\n        border-radius: 12px;\r\n        font-size: 1.1rem;\r\n        line-height: 1.8;\r\n        overflow-y: auto;\r\n        position: relative;\r\n        max-height: calc(100vh - 245px);\r\n        height: 100%;\r\n    }\r\n\r\n    .formula-status {\r\n        position: absolute;\r\n        top: 10px;\r\n        right: 10px;\r\n        font-size: 0.8rem;\r\n        color: #94a3b8;\r\n        background: rgba(15, 23, 42, 0.5);\r\n        padding: 4px 8px;\r\n        border-radius: 4px;\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px;\r\n    }\r\n\r\n    .copy-icon {\r\n        cursor: pointer;\r\n        color: #94a3b8;\r\n        font-size: 0.9rem;\r\n        transition: color 0.3s ease;\r\n    }\r\n\r\n    .copy-icon:hover {\r\n        color: #38bdf8;\r\n    }\r\n\r\n    .loading {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 40px 0;\r\n    }\r\n\r\n    .spinner {\r\n        width: 50px;\r\n        height: 50px;\r\n        border: 5px solid rgba(56, 189, 248, 0.2);\r\n        border-top: 5px solid #38bdf8;\r\n        border-radius: 50%;\r\n        animation: spin 1s linear infinite;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    @keyframes spin {\r\n        0% { transform: rotate(0deg); }\r\n        100% { transform: rotate(360deg); }\r\n    }\r\n\r\n    .save-btn-container {\r\n        padding: 15px;\r\n        text-align: center;\r\n        border-top: 1px solid rgba(94, 234, 212, 0.1);\r\n    }\r\n\r\n    .save-status {\r\n        padding: 8px 12px;\r\n        border-radius: 6px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        gap: 8px;\r\n        animation: fadeInOut 3s forwards;\r\n    }\r\n\r\n    .save-success {\r\n        background: rgba(16, 185, 129, 0.1);\r\n        color: #10b981;\r\n        border-left: 3px solid #10b981;\r\n    }\r\n\r\n    .save-error {\r\n        background: rgba(239, 68, 68, 0.1);\r\n        color: #f87171;\r\n        border-left: 3px solid #f87171;\r\n    }\r\n\r\n    @keyframes fadeInOut {\r\n        0% { opacity: 0; transform: translateY(10px); }\r\n        20% { opacity: 1; transform: translateY(0); }\r\n        80% { opacity: 1; transform: translateY(0); }\r\n        100% { opacity: 0; transform: translateY(-10px); }\r\n    }\r\n\r\n    .exercise-results-container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 28px;\r\n        padding: 15px 0;\r\n    }\r\n\r\n    .exercise-card {\r\n        background: rgba(26, 32, 50, 0.8);\r\n        border-radius: 16px;\r\n        padding: 25px;\r\n        border: 1px solid rgba(94, 234, 212, 0.2);\r\n        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.35);\r\n        transition: all 0.4s ease;\r\n        position: relative;\r\n        overflow: hidden;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .exercise-card:before {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 5px;\r\n        height: 100%;\r\n        background: linear-gradient(to bottom, #5eead4, #0ea5e9);\r\n        z-index: 1;\r\n    }\r\n\r\n    .exercise-card:hover {\r\n        transform: translateY(-5px);\r\n        box-shadow: 0 12px 35px rgba(94, 234, 212, 0.25);\r\n        border-color: rgba(94, 234, 212, 0.4);\r\n    }\r\n\r\n    .exercise-header {\r\n        display: flex;\r\n        align-items: flex-start;\r\n        margin-bottom: 22px;\r\n        padding-bottom: 18px;\r\n        border-bottom: 1px solid rgba(94, 234, 212, 0.15);\r\n        position: relative;\r\n    }\r\n\r\n    .question-index {\r\n        font-weight: 700;\r\n        color: #5eead4;\r\n        font-size: 1.4em;\r\n        min-width: 40px;\r\n        text-shadow: 0 0 8px rgba(94, 234, 212, 0.4);\r\n        background: rgba(15, 23, 42, 0.4);\r\n        padding: 6px 12px;\r\n        border-radius: 8px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .question-title {\r\n        font-size: 1.25em;\r\n        line-height: 1.75;\r\n        color: #f8fafc;\r\n        flex: 1;\r\n        padding-left: 15px;\r\n        text-align: justify;\r\n        font-weight: 500;\r\n    }\r\n\r\n    .options-container {\r\n        display: grid;\r\n        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\r\n        gap: 16px;\r\n        margin: 22px 0;\r\n    }\r\n\r\n    .option-item {\r\n        display: flex;\r\n        padding: 12px 18px;\r\n        background: rgba(15, 23, 42, 0.45);\r\n        border-radius: 10px;\r\n        transition: all 0.3s;\r\n        border: 1px solid rgba(94, 234, 212, 0.1);\r\n        backdrop-filter: blur(5px);\r\n    }\r\n\r\n    .option-item:hover {\r\n        background: rgba(94, 234, 212, 0.12);\r\n        transform: translateY(-3px);\r\n        border-color: rgba(94, 234, 212, 0.25);\r\n        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    .option-key {\r\n        font-weight: 700;\r\n        color: #5eead4;\r\n        margin-right: 12px;\r\n        min-width: 28px;\r\n        font-size: 1.2em;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .option-value {\r\n        color: #e2e8f0;\r\n        font-size: 1.1em;\r\n        line-height: 1.6;\r\n    }\r\n\r\n    .answer-container {\r\n        display: flex;\r\n        align-items: center;\r\n        margin: 25px 0;\r\n        padding: 18px;\r\n        background: rgba(15, 23, 42, 0.55);\r\n        border-radius: 12px;\r\n        border: 1px solid rgba(94, 234, 212, 0.15);\r\n        box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    .answer-label {\r\n        font-weight: 700;\r\n        color: #94a3b8;\r\n        min-width: 100px;\r\n        font-size: 1.1em;\r\n        letter-spacing: 1px;\r\n    }\r\n\r\n    .answer-content {\r\n        font-weight: 600;\r\n        font-size: 1.3em;\r\n        padding: 8px 15px;\r\n        border-radius: 8px;\r\n        background: rgba(26, 32, 50, 0.6);\r\n        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    .status-container {\r\n        display: flex;\r\n        gap: 35px;\r\n        margin: 25px 0;\r\n        padding: 18px 0;\r\n        border-top: 1px solid rgba(94, 234, 212, 0.15);\r\n        border-bottom: 1px solid rgba(94, 234, 212, 0.15);\r\n    }\r\n\r\n    .status-item {\r\n        display: flex;\r\n        align-items: center;\r\n        padding: 10px 15px;\r\n        background: rgba(15, 23, 42, 0.4);\r\n        border-radius: 10px;\r\n    }\r\n\r\n    .status-label {\r\n        font-weight: 600;\r\n        color: #94a3b8;\r\n        margin-right: 10px;\r\n        font-size: 1.05em;\r\n    }\r\n\r\n    .status-value {\r\n        font-weight: 700;\r\n        font-size: 1.15em;\r\n        padding: 5px 12px;\r\n        border-radius: 6px;\r\n    }\r\n\r\n    .analysis-container {\r\n        margin-top: 25px;\r\n        position: relative;\r\n    }\r\n\r\n    .analysis-label {\r\n        font-weight: 700;\r\n        color: #5eead4;\r\n        margin-bottom: 15px;\r\n        font-size: 1.25em;\r\n        display: flex;\r\n        align-items: center;\r\n        padding-left: 35px;\r\n        position: relative;\r\n    }\r\n\r\n    .analysis-label:before {\r\n        content: '';\r\n        position: absolute;\r\n        left: 0;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        width: 28px;\r\n        height: 28px;\r\n        background: rgba(94, 234, 212, 0.2);\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 1.1em;\r\n    }\r\n\r\n    .analysis-content {\r\n        line-height: 1.85;\r\n        color: #e2e8f0;\r\n        padding: 22px;\r\n        background: rgba(15, 23, 42, 0.45);\r\n        border-radius: 12px;\r\n        border-left: 3px solid #0ea5e9;\r\n        box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.25);\r\n        font-size: 1.1em;\r\n        text-align: justify;\r\n    }\r\n\r\n    .status-correct {\r\n        background: rgba(82, 196, 26, 0.15);\r\n        color: #52c41a;\r\n    }\r\n\r\n    .status-incorrect {\r\n        background: rgba(255, 77, 79, 0.15);\r\n        color: #ff4d4f;\r\n    }\r\n\r\n    .status-neutral {\r\n        background: rgba(148, 163, 184, 0.15);\r\n        color: #94a3b8;\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n        .exercise-card {\r\n            padding: 18px;\r\n            border-radius: 14px;\r\n        }\r\n\r\n        .options-container {\r\n            grid-template-columns: 1fr;\r\n        }\r\n\r\n        .status-container {\r\n            flex-direction: column;\r\n            gap: 15px;\r\n        }\r\n\r\n        .answer-container {\r\n            flex-direction: column;\r\n            align-items: flex-start;\r\n            gap: 12px;\r\n        }\r\n\r\n        .answer-label {\r\n            min-width: auto;\r\n        }\r\n\r\n        .analysis-content {\r\n            padding: 18px;\r\n        }\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n        .result-section {\r\n            padding: 15px;\r\n        }\r\n\r\n        .result-title {\r\n            font-size: 1.1rem;\r\n            padding-bottom: 12px;\r\n        }\r\n\r\n        .result-content {\r\n            padding: 15px;\r\n            font-size: 0.9rem;\r\n            min-height: 200px;\r\n            max-height: 40vh;\r\n            border-radius: 0px;\r\n        }\r\n\r\n        .formula-status {\r\n            font-size: 0.7rem;\r\n            top: 5px;\r\n            right: 5px;\r\n        }\r\n        .status-label{\r\n            display: none;\r\n        }\r\n    }\r\n    .error-prompt {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 40px 20px;\r\n        background: rgba(255, 169, 64, 0.1);\r\n        border-radius: 12px;\r\n        border: 1px solid rgba(255, 169, 64, 0.3);\r\n        text-align: center;\r\n        margin: 20px 0;\r\n    }\r\n\r\n    .error-icon {\r\n        font-size: 3rem;\r\n        color: #ffa940;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .error-content {\r\n        font-size: 1.1rem;\r\n        color: #ffd8a6;\r\n        line-height: 1.6;\r\n        max-width: 600px;\r\n    }\r\n</style>\r\n","import script from \"./ResultSection.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ResultSection.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ResultSection.vue?vue&type=style&index=0&id=69bff64a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-69bff64a\"]])\n\nexport default __exports__","<template>\r\n    <!-- 加载状态 -->\r\n    <div v-if=\"isRedeeming\" class=\"loading-overlay\">\r\n        <div class=\"spinner\"></div>\r\n        <p>正在验证秘钥...</p>\r\n    </div>\r\n\r\n    <div class=\"modal\" :class=\"{active: store.showKeyModal}\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <div>\r\n                    <h3 class=\"modal-title\">积分秘钥管理</h3>\r\n\r\n                </div>\r\n                <button class=\"close-modal\" @click=\"store.showKeyModal = false\">&times;</button>\r\n            </div>\r\n\r\n            <div class=\"modal-body\">\r\n                <!-- 积分秘钥输入区域 -->\r\n                <div class=\"key-section\">\r\n                    <div class=\"form-group\">\r\n                        <div class=\"form-label\">\r\n                            <div class=\"form-des\">积分秘钥</div>\r\n                            <!-- 当前积分移到右上角 -->\r\n                            <div class=\"points-mini\">\r\n                                <i class=\"fas fa-coins\"></i>\r\n                                <span class=\"points-value\">{{ store.points }}</span>\r\n                                <span>积分</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"key-input-group\">\r\n                            <input\r\n                                    type=\"text\"\r\n                                    class=\"key-input\"\r\n                                    placeholder=\"请输入积分秘钥\"\r\n                                    v-model=\"redeemCode\"\r\n                                    @input=\"handleKeyInput\"\r\n                            >\r\n                            <div class=\"key-buttons\">\r\n                                <button class=\"key-button\" @click=\"copyRedeemCode\">\r\n                                    <i class=\"fas fa-copy\"></i>\r\n                                </button>\r\n\r\n                                <!-- 兑换按钮与输入框同行 -->\r\n                                <button\r\n                                        class=\"redeem-btn\"\r\n                                        @click=\"redeemPoints\"\r\n                                        :class=\"{ 'show': redeemCode }\"\r\n                                >\r\n                                    <i class=\"fas fa-gift\"></i> 兑换\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div v-if=\"redeemMessage\" class=\"redeem-message\" :class=\"{'error': redeemError}\">\r\n                            {{ redeemMessage }}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- 历史记录 -->\r\n                <div class=\"history-section\" v-if=\"keyHistory.length\">\r\n                    <h3>兑换历史</h3>\r\n                    <ul>\r\n                        <li v-for=\"(record, index) in keyHistory\" :key=\"index\">\r\n                            {{ formatDate(record.date) }} -\r\n                            兑换 {{ record.points }} 积分\r\n                            <span v-if=\"record.key\">(秘钥: {{ maskKey(record.key) }})</span>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                <!-- 购买积分套餐 -->\r\n              <!--  <h3 class=\"section-title\">\r\n                    购买积分套餐\r\n                </h3>-->\r\n\r\n                <!-- 添加购买引导 -->\r\n                <div class=\"purchase-guide\">\r\n                    <i class=\"fas fa-lightbulb\"></i>\r\n                    <span>点击购买以下积分套餐，获取更多积分</span>\r\n                </div>\r\n\r\n                <div class=\"buy-options\">\r\n                    <div class=\"buy-option\" @click=\"buyPoints(100, 10)\">\r\n                        <div class=\"option-icon\">\r\n                            <i class=\"fas fa-gem\"></i>\r\n                        </div>\r\n                        <h3>100积分</h3>\r\n                        <p>¥10</p>\r\n                        <div class=\"option-hint\">基础套餐</div>\r\n                    </div>\r\n                    <div class=\"buy-option\" @click=\"buyPoints(200, 18)\">\r\n                        <div class=\"option-icon\">\r\n                            <i class=\"fas fa-crown\"></i>\r\n                        </div>\r\n                        <h3>200积分</h3>\r\n                        <p>¥18 <span class=\"discount\">(9折)</span></p>\r\n                        <div class=\"option-hint\">热门选择</div>\r\n                    </div>\r\n                    <div class=\"buy-option\" @click=\"buyPoints(500, 40)\">\r\n                        <div class=\"option-icon\">\r\n                            <i class=\"fas fa-rocket\"></i>\r\n                        </div>\r\n                        <h3>500积分</h3>\r\n                        <p>¥40 <span class=\"discount\">(8折)</span></p>\r\n                        <div class=\"option-hint\">超值推荐</div>\r\n                    </div>\r\n                    <div class=\"buy-option\" @click=\"buyPoints(1000, 75)\">\r\n                        <div class=\"option-icon\">\r\n                            <i class=\"fas fa-diamond\"></i>\r\n                        </div>\r\n                        <h3>1000积分</h3>\r\n                        <p>¥75 <span class=\"discount\">(7.5折)</span></p>\r\n                        <div class=\"option-hint\">尊享套餐</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { ref, onMounted } from 'vue';\r\n    import { useAppStore } from '../store';\r\n\r\n    const store = useAppStore();\r\n    const redeemCode = ref('');\r\n    const redeemMessage = ref('');\r\n    const redeemError = ref(false);\r\n    // 添加新状态\r\n    const isRedeeming = ref(false);\r\n    const keyHistory = ref([]);\r\n    // 积分套餐对应的淘宝链接\r\n    const taobaoLinks = {\r\n        100: 'https://taobao.com/item1',\r\n        200: 'https://taobao.com/item2',\r\n        500: 'https://taobao.com/item3',\r\n        1000: 'https://taobao.com/item4'\r\n    };\r\n\r\n    // 确保页面加载时从localStorage加载积分\r\n    onMounted(async() => {\r\n        await store.loadKeyHistory();\r\n        keyHistory.value = store.redeemedKeys;\r\n        // 如果store未初始化，手动初始化\r\n        if (!store.userId) {\r\n            store.initUserId();\r\n        }\r\n    });\r\n    // 辅助方法\r\n    const maskKey = (key) => {\r\n        if (key.length < 8) return '***';\r\n        return key.substring(0, 4) + '***' + key.slice(-4);\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        return new Date(dateString).toLocaleString();\r\n    };\r\n    // 处理输入变化\r\n    const handleKeyInput = () => {\r\n        // 兑换按钮状态由v-bind:class控制\r\n    };\r\n    // 购买积分 - 直接跳转到淘宝\r\n    const buyPoints = (points, price) => {\r\n        console.log(price)\r\n        window.open(taobaoLinks[points], '_blank');\r\n    };\r\n\r\n    // 兑换积分\r\n    // 修改兑换方法\r\n    const redeemPoints = async () => {\r\n        if (!redeemCode.value) {\r\n            showMessage('请输入兑换码', true);\r\n            return;\r\n        }\r\n\r\n        // 检查是否已使用\r\n        if (store.redeemedKeys.some(k => k.key === redeemCode.value)) {\r\n            showMessage('该秘钥已被使用', true);\r\n            return;\r\n        }\r\n\r\n        isRedeeming.value = true;\r\n\r\n        try {\r\n            console.log('88888888888888::'+redeemCode.value);\r\n            const validation = await store.validateKeyNew(redeemCode.value);\r\n            console.log('99999999999999999999');\r\n\r\n            if (validation.valid) {\r\n                store.addPoints(validation.points);\r\n                //store.saveRedeemedKey(redeemCode.value);\r\n                showMessage(`成功兑换 ${validation.points} 积分!`, false);\r\n                redeemCode.value = '';\r\n\r\n                // 刷新历史记录\r\n                keyHistory.value = store.redeemedKeys;\r\n            } else {\r\n                showMessage(validation.error || '无效的兑换码', true);\r\n            }\r\n        } catch (error) {\r\n            showMessage(`兑换失败: ${error.message || '未知错误'}`, true);\r\n        } finally {\r\n            isRedeeming.value = false;\r\n        }\r\n    };\r\n\r\n    // 显示消息\r\n    const showMessage = (message, isError) => {\r\n        redeemMessage.value = message;\r\n        redeemError.value = isError;\r\n\r\n        // 3秒后清除消息\r\n        setTimeout(() => {\r\n            redeemMessage.value = '';\r\n        }, 3000);\r\n    };\r\n\r\n    // 复制输入的兑换码\r\n    const copyRedeemCode = () => {\r\n        if (redeemCode.value) {\r\n            navigator.clipboard.writeText(redeemCode.value)\r\n                .then(() => {\r\n                    showMessage('兑换码已复制', false);\r\n                })\r\n                .catch(() => {\r\n                    showMessage('复制失败，请手动复制', true);\r\n                });\r\n        }\r\n    };\r\n</script>\r\n\r\n\r\n<style scoped>\r\n    /* 加载状态 */\r\n    .loading-overlay {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: rgba(15, 23, 42, 0.9);\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        z-index: 10;\r\n        border-radius: 16px;\r\n    }\r\n\r\n    .spinner {\r\n        width: 50px;\r\n        height: 50px;\r\n        border: 5px solid rgba(94, 234, 212, 0.3);\r\n        border-top: 5px solid #38bdf8;\r\n        border-radius: 50%;\r\n        animation: spin 1s linear infinite;\r\n        margin-bottom: 15px;\r\n\r\n    }\r\n\r\n    @keyframes spin {\r\n        0% { transform: rotate(0deg); }\r\n        100% { transform: rotate(360deg); }\r\n    }\r\n\r\n    /* 主模态框 */\r\n    .modal {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: rgba(0, 0, 0, 0.7);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        z-index: 1000;\r\n        opacity: 0;\r\n        visibility: hidden;\r\n        transition: all 0.3s;\r\n    }\r\n\r\n    .modal.active {\r\n        opacity: 1;\r\n        visibility: visible;\r\n    }\r\n\r\n    .modal-content {\r\n        background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);\r\n        border-radius: 16px;\r\n        width: 90%;\r\n        max-width: 500px;\r\n        padding: 20px; /* 减少内边距 */\r\n        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);\r\n        transform: translateY(-50px);\r\n        transition: transform 0.4s;\r\n        position: relative;\r\n        border: 1px solid rgba(94, 234, 212, 0.1);\r\n        max-height: 85vh;\r\n        overflow: hidden; /* 确保不出现外部滚动条 */\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .modal.active .modal-content {\r\n        transform: translateY(0);\r\n    }\r\n\r\n    .modal-header {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: flex-start;\r\n        position: relative;\r\n        padding-bottom: 15px; /* 减少内边距 */\r\n        border-bottom: 1px solid rgba(94, 234, 212, 0.1);\r\n        flex-shrink: 0;\r\n    }\r\n\r\n    .modal-title {\r\n        font-size: 1.4rem; /* 减小字体大小 */\r\n        color: #f8fafc;\r\n        font-weight: 600;\r\n        margin-right: 110px; /* 给积分显示留空间 */\r\n    }\r\n\r\n    .close-modal {\r\n        background: none;\r\n        border: none;\r\n        font-size: 1.8rem;\r\n        cursor: pointer;\r\n        color: #94a3b8;\r\n        transition: color 0.3s;\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n    }\r\n\r\n    .close-modal:hover {\r\n        color: #f87171;\r\n    }\r\n\r\n    .modal-body {\r\n        margin-bottom: 15px; /* 减少外边距 */\r\n        padding: 5px 0; /* 垂直内边距 */\r\n        flex-grow: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        overflow: visible; /* 确保不出现滚动条 */\r\n    }\r\n\r\n    /* 积分显示 */\r\n    .points-mini {\r\n        display: inline-block;\r\n        top: 0;\r\n        right: 40px;\r\n        align-items: center;\r\n        gap: 6px;\r\n        padding: 5px 10px; /* 减小内边距 */\r\n      /*  background: rgba(56, 189, 248, 0.15);*/\r\n        border-radius: 20px;\r\n        font-size: 0.85rem; /* 减小字体大小 */\r\n        color: #38bdf8;\r\n       /* border: 1px solid rgba(56, 189, 248, 0.3);*/\r\n    }\r\n\r\n    .points-value {\r\n        margin-left: 5px;\r\n        margin-right: 5px;\r\n        font-weight: bold;\r\n        font-size: 1rem; /* 减小字体大小 */\r\n        color: #fde047;\r\n        animation: pulse 1.5s infinite;\r\n    }\r\n\r\n    @keyframes pulse {\r\n        0% { transform: scale(1); }\r\n        50% { transform: scale(1.05); }\r\n        100% { transform: scale(1); }\r\n    }\r\n\r\n    /* 输入区域 */\r\n    .key-section {\r\n        height: 130px;\r\n        background: rgba(15, 23, 42, 0.3);\r\n        border-radius: 12px;\r\n        padding: 15px; /* 减小内边距 */\r\n        margin-bottom: 15px; /* 减小外边距 */\r\n        padding-bottom: 0px;\r\n    }\r\n\r\n    .form-group label {\r\n        display: block;\r\n        margin-bottom: 8px; /* 减小外边距 */\r\n        font-weight: 500;\r\n        color: #e2e8f0;\r\n        font-size: 0.95rem; /* 减小字体大小 */\r\n    }\r\n\r\n    .key-input-group {\r\n        display: flex;\r\n        margin-bottom: 8px; /* 减小外边距 */\r\n    }\r\n\r\n    .key-input {\r\n        flex: 1;\r\n        padding: 12px 15px; /* 减小内边距 */\r\n        border: 2px solid rgba(94, 234, 212, 0.2);\r\n        border-radius: 10px 0 0 10px;\r\n        font-size: 0.95rem; /* 减小字体大小 */\r\n        transition: all 0.3s;\r\n        background: rgba(15, 23, 42, 0.5);\r\n        color: #e2e8f0;\r\n        min-width: 0;\r\n    }\r\n\r\n    .key-input:focus {\r\n        border-color: #38bdf8;\r\n        outline: none;\r\n        box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.2);\r\n    }\r\n\r\n    .key-buttons {\r\n        display: flex;\r\n    }\r\n\r\n    .key-button {\r\n        padding: 12px 15px; /* 减小内边距 */\r\n        background: linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%);\r\n        color: white;\r\n        border: none;\r\n        cursor: pointer;\r\n        transition: background 0.3s;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 0.9rem; /* 减小字体大小 */\r\n    }\r\n\r\n    .key-button:hover {\r\n        background: linear-gradient(135deg, #0284c7 0%, #4f46e5 100%);\r\n    }\r\n\r\n    .key-button:first-child {\r\n        border-radius: 0;\r\n        width: 48px; /* 减小宽度 */\r\n        border-right: 1px solid rgba(255, 255, 255, 0.2);\r\n    }\r\n\r\n    /* 兑换按钮 */\r\n    .redeem-btn {\r\n        padding: 0 12px; /* 减小内边距 */\r\n        background: linear-gradient(135deg, #10b981 0%, #047857 100%);\r\n        color: white;\r\n        border: none;\r\n        cursor: pointer;\r\n        transition: all 0.3s;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        width: 0;\r\n        opacity: 0;\r\n        overflow: hidden;\r\n        border-radius: 0 10px 10px 0;\r\n        font-size: 0.9rem; /* 减小字体大小 */\r\n    }\r\n\r\n    .redeem-btn.show {\r\n        width: 80px; /* 减小宽度 */\r\n        opacity: 1;\r\n        padding: 12px 12px; /* 减小内边距 */\r\n    }\r\n\r\n    .redeem-btn i {\r\n        margin-right: 4px; /* 减小间距 */\r\n    }\r\n\r\n    .redeem-btn:hover {\r\n        background: linear-gradient(135deg, #059669 0%, #065f46 100%);\r\n    }\r\n\r\n    /* 消息提示 */\r\n    .redeem-message {\r\n        margin-top: 0px; /* 减小外边距 */\r\n        padding: 3px 10px; /* 减小内边距 */\r\n        border-radius: 6px;\r\n        font-size: 0.7rem; /* 减小字体大小 */\r\n        background-color: rgba(56, 189, 248, 0.1);\r\n        color: #38bdf8;\r\n        border-left: 3px solid #38bdf8;\r\n    }\r\n\r\n    .redeem-message.error {\r\n        background-color: rgba(239, 68, 68, 0.1);\r\n        color: #f87171;\r\n        border-left-color: #f87171;\r\n    }\r\n\r\n    /* 历史记录 */\r\n    .history-section {\r\n        background: rgba(15, 23, 42, 0.3);\r\n        border-radius: 8px;\r\n        padding: 12px; /* 减小内边距 */\r\n        margin: 12px 0; /* 减小外边距 */\r\n        max-height: 120px; /* 减小最大高度 */\r\n        overflow-y: auto;\r\n    }\r\n\r\n    .history-section h3 {\r\n        font-size: 1rem; /* 减小字体大小 */\r\n        margin-bottom: 8px; /* 减小外边距 */\r\n        color: #38bdf8;\r\n    }\r\n\r\n    .history-section ul {\r\n        list-style: none;\r\n        padding: 0;\r\n        margin: 0;\r\n    }\r\n\r\n    .history-section li {\r\n        padding: 4px 0; /* 减小内边距 */\r\n        font-size: 0.8rem; /* 减小字体大小 */\r\n        color: #cbd5e1;\r\n        border-bottom: 1px dashed rgba(94, 234, 212, 0.1);\r\n    }\r\n\r\n    .history-section li:last-child {\r\n        border-bottom: none;\r\n    }\r\n\r\n    /* 购买引导 */\r\n    .purchase-guide {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px; /* 减小间距 */\r\n        background: rgba(234, 179, 8, 0.1);\r\n        border-radius: 8px;\r\n        padding: 8px 12px; /* 减小内边距 */\r\n        margin: 8px 0 10px; /* 减小外边距 */\r\n        color: #fde047;\r\n        border-left: 3px solid #fde047;\r\n        font-size: 0.85rem; /* 减小字体大小 */\r\n    }\r\n\r\n    .purchase-guide i {\r\n        color: #fde047;\r\n        font-size: 0.9rem; /* 减小字体大小 */\r\n    }\r\n\r\n    /* 分区标题 */\r\n    .section-title {\r\n        text-align: center;\r\n        margin: 15px 0 10px; /* 减小外边距 */\r\n        color: #f8fafc;\r\n        border-bottom: 1px solid rgba(94, 234, 212, 0.1);\r\n        padding-bottom: 8px; /* 减小内边距 */\r\n        font-size: 1.1rem; /* 减小字体大小 */\r\n    }\r\n\r\n    /* 购买选项 */\r\n    .buy-options {\r\n        display: grid;\r\n        grid-template-columns: repeat(2, 1fr);\r\n        gap: 12px; /* 减小间距 */\r\n        margin-top: 8px; /* 减小外边距 */\r\n    }\r\n\r\n    .buy-option {\r\n        background: rgba(15, 23, 42, 0.4);\r\n        border-radius: 12px;\r\n        padding: 10px; /* 减小内边距 */\r\n        text-align: center;\r\n        cursor: pointer;\r\n        transition: all 0.3s;\r\n        border: 1px solid rgba(94, 234, 212, 0.1);\r\n        position: relative;\r\n        overflow: hidden;\r\n        min-width: 0;\r\n    }\r\n\r\n    .buy-option:hover {\r\n        transform: translateY(-3px); /* 减小悬停效果 */\r\n        box-shadow: 0 6px 12px rgba(14, 165, 233, 0.2); /* 减小阴影 */\r\n        border-color: rgba(56, 189, 248, 0.3);\r\n    }\r\n\r\n    .option-icon {\r\n        font-size: 1.5rem; /* 减小图标大小 */\r\n        margin-bottom: 8px; /* 减小外边距 */\r\n        color: #38bdf8;\r\n    }\r\n\r\n    .buy-option h3 {\r\n        font-size: 1rem; /* 减小字体大小 */\r\n        margin-bottom: 6px; /* 减小外边距 */\r\n        color: #38bdf8;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    .buy-option p {\r\n        font-size: 0.9rem; /* 减小字体大小 */\r\n        color: #f8fafc;\r\n        margin-bottom: 4px; /* 减小外边距 */\r\n    }\r\n\r\n    .discount {\r\n        color: #fde047;\r\n        font-size: 0.8rem; /* 减小字体大小 */\r\n    }\r\n\r\n    .option-hint {\r\n        font-size: 0.75rem; /* 减小字体大小 */\r\n        padding: 2px 6px; /* 减小内边距 */\r\n        background: rgba(56, 189, 248, 0.15);\r\n        border-radius: 8px; /* 减小圆角 */\r\n        display: inline-block;\r\n        color: #7dd3fc;\r\n        margin-top: 4px; /* 减小外边距 */\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n\r\n    /* 响应式优化 */\r\n    @media (max-width: 768px) {\r\n        .modal-content {\r\n            max-height: 90vh;\r\n            width: 95%;\r\n            padding: 15px;\r\n        }\r\n\r\n        .modal-title {\r\n            margin-right: 0;\r\n            font-size: 1.2rem;\r\n        }\r\n\r\n        .points-mini {\r\n            position: static;\r\n            margin-top: 8px;\r\n            justify-content: center;\r\n            width: 100%;\r\n        }\r\n\r\n        .buy-options {\r\n            grid-template-columns: 1fr;\r\n            gap: 10px;\r\n        }\r\n\r\n        .redeem-btn.show {\r\n            width: 70px;\r\n            padding: 10px;\r\n        }\r\n\r\n        .key-input {\r\n            min-width: 50px;\r\n        }\r\n\r\n        /* 移动端进一步减小尺寸 */\r\n        .section-title {\r\n            font-size: 1rem;\r\n            margin: 10px 0;\r\n        }\r\n\r\n        .history-section {\r\n            max-height: 100px;\r\n            padding: 10px;\r\n        }\r\n\r\n        .buy-option {\r\n            padding: 12px;\r\n        }\r\n    }\r\n\r\n    @media (max-width: 480px) {\r\n        .key-buttons {\r\n            flex-wrap: wrap;\r\n        }\r\n\r\n        .key-button:first-child,\r\n        .redeem-btn {\r\n            width: 100%;\r\n            border-radius: 0 0 10px 10px;\r\n            margin-top: 5px;\r\n        }\r\n\r\n        .key-input {\r\n            border-radius: 10px 10px 0 0;\r\n        }\r\n\r\n        /* 超小屏幕进一步优化 */\r\n        .modal-body {\r\n            padding: 3px 0;\r\n        }\r\n\r\n        .key-section {\r\n            padding: 12px;\r\n            margin-bottom: 10px;\r\n            height: 150px;\r\n        }\r\n\r\n        .history-section {\r\n            margin: 8px 0;\r\n            max-height: 90px;\r\n        }\r\n\r\n        .buy-options {\r\n            gap: 8px;\r\n        }\r\n\r\n        .option-icon {\r\n            font-size: 1.2rem;\r\n        }\r\n    }\r\n    .form-des{\r\n        display: inline-block;\r\n    }\r\n</style>\r\n","import script from \"./KeyModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./KeyModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./KeyModal.vue?vue&type=style&index=0&id=0062b3ee&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0062b3ee\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"modal\" :class=\"{active: store.showServiceModal}\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h3 class=\"modal-title\">联系客服</h3>\r\n                <button class=\"close-modal\" @click=\"store.showServiceModal = false\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <div class=\"key-note\" style=\"text-align: center;\">\r\n                    <p><i class=\"fas fa-comments\" style=\"font-size: 3rem; color: #38bdf8; margin-bottom: 15px;\"></i></p>\r\n                    <p>客服工作时间：9:00-18:00（工作日）</p>\r\n                    <p>紧急问题：400-123-4567</p>\r\n                    <p>微信客服：MathSolver_Service</p>\r\n                    <p>QQ客服：123456789</p>\r\n                    <p>邮箱：support@mathsolver.com</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button class=\"confirm-btn service-btn-modal\" @click=\"store.copyWechat\">\r\n                    <i class=\"fab fa-weixin\"></i> 复制微信客服\r\n                </button>\r\n                <button class=\"confirm-btn\" @click=\"store.showServiceModal = false\">\r\n                    关闭\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { useAppStore } from '../store'\r\n\r\n    const store = useAppStore()\r\n</script>\r\n\r\n<style scoped>\r\n    .service-btn-modal {\r\n        background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);\r\n    }\r\n</style>","import script from \"./ServiceModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ServiceModal.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ServiceModal.vue?vue&type=style&index=0&id=db687e08&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-db687e08\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"modal\" :class=\"{active: store.showInsufficientModal}\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h3 class=\"modal-title\">积分不足</h3>\r\n                <button class=\"close-modal\" @click=\"store.showInsufficientModal = false\">&times;</button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <p>您的积分不足，无法进行解析操作。</p>\r\n                <p>当前积分: <strong>{{ store.points }}</strong>，解析需要{{ store.parseCost }}积分。</p>\r\n                <p>请购买积分后继续使用。</p>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button class=\"confirm-btn\" @click=\"store.showInsufficientModal = false; store.showKeyModal = true\">购买积分</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { useAppStore } from '../store'\r\n\r\n    const store = useAppStore()\r\n</script>","import script from \"./InsufficientModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./InsufficientModal.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"history-sidebar\" :class=\"{active: store.showHistorySidebar}\">\r\n        <div class=\"sidebar-header\">\r\n            <h3><i class=\"fas fa-history\"></i> 历史记录</h3>\r\n            <button class=\"close-btn\" @click=\"store.showHistorySidebar = false\">\r\n                <i class=\"fas fa-times\"></i>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"history-list\">\r\n            <!-- 添加加载状态 -->\r\n            <div v-if=\"loading\" class=\"loading-history\">\r\n                <div class=\"spinner\"></div>\r\n                <p>加载历史记录中...</p>\r\n            </div>\r\n\r\n            <div v-else-if=\"store.history.length === 0\" class=\"empty-history\">\r\n                <i class=\"fas fa-inbox\"></i>\r\n                <p>暂无历史记录</p>\r\n                <p>解析后的习题将保存在这里</p>\r\n            </div>\r\n\r\n            <div v-else v-for=\"(item, index) in store.history\" :key=\"index\"\r\n                 class=\"history-item\"\r\n                 :class=\"{active: store.activeHistory === item.id}\"\r\n                 @click=\"loadHistory(item)\">\r\n                <div class=\"item-thumbnail\">\r\n                    <img :src=\"item.imageUrl\" alt=\"历史习题\">\r\n                </div>\r\n                <div class=\"item-info\">\r\n                    <div class=\"item-title\">解析记录 #{{ index + 1 }}</div>\r\n                    <div class=\"item-time\">{{ formatDate(item.timestamp) }}</div>\r\n                    <div class=\"item-preview\">{{ truncateText(item.result) }}</div>\r\n                </div>\r\n                <button class=\"delete-btn\" @click.stop=\"deleteHistory(item.id)\">\r\n                    <i class=\"fas fa-trash\"></i>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { useAppStore } from '../store'\r\n    import { ref, onMounted } from 'vue'\r\n    const store = useAppStore()\r\n    const loading = ref(false)\r\n\r\n    onMounted(() => {\r\n        // 确保历史记录已加载\r\n        if (store.history.length === 0) {\r\n            loadHistoryFromStorage()\r\n        }\r\n    })\r\n\r\n    const loadHistoryFromStorage = () => {\r\n        loading.value = true\r\n        try {\r\n            const savedHistory = localStorage.getItem('mathSolverHistory')\r\n            if (savedHistory) {\r\n                store.history = JSON.parse(savedHistory)\r\n            }\r\n        } catch (e) {\r\n            console.error('加载历史记录失败:', e)\r\n        } finally {\r\n            loading.value = false\r\n        }\r\n    }\r\n\r\n    const formatDate = (timestamp) => {\r\n        const date = new Date(timestamp)\r\n        return `${date.getFullYear()}-${(date.getMonth()+1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\r\n    }\r\n\r\n    const truncateText = (text) => {\r\n        console.log('what-1?');\r\n        // 处理非字符串和空值\r\n        if (text == null) return '';\r\n        console.log('what0?');\r\n        console.log(text);\r\n        console.log('what111')\r\n        try{\r\n            var curItems = text.output;\r\n            if(curItems.length>0){\r\n                text = curItems[0].question;\r\n            }\r\n            console.log('waht22')\r\n            console.log(text);\r\n        }catch (e) {console.log(e)}\r\n\r\n\r\n        if (typeof text !== 'string') {\r\n            try {\r\n                // 尝试转换非字符串值\r\n                text = String(text);\r\n            } catch {\r\n                return '';\r\n            }\r\n        }\r\n\r\n        const plainText = text.replace(/<[^>]*>/g, '');\r\n        return plainText.length > 30\r\n            ? plainText.substring(0, 30) + '...'\r\n            : plainText;\r\n\r\n    }\r\n\r\n    const loadHistory = (item) => {\r\n        store.loadHistory(item);\r\n        store.showHistorySidebar = false;\r\n    }\r\n\r\n    const deleteHistory = (id) => {\r\n        store.removeHistory(id)\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .history-sidebar {\r\n        position: fixed;\r\n        top: 0;\r\n        right: -400px;\r\n        width: 380px;\r\n        height: 100vh;\r\n        background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);\r\n        z-index: 999;\r\n        transition: all 0.4s ease;\r\n        box-shadow: -5px 0 25px rgba(0, 0, 0, 0.5);\r\n        border-left: 1px solid rgba(94, 234, 212, 0.1);\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .history-sidebar.active {\r\n        right: 0;\r\n    }\r\n\r\n    .sidebar-header {\r\n        padding: 20px 25px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        border-bottom: 1px solid rgba(94, 234, 212, 0.1);\r\n    }\r\n\r\n    .sidebar-header h3 {\r\n        font-size: 1.3rem;\r\n        color: #f8fafc;\r\n        font-weight: 600;\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n    }\r\n\r\n    .close-btn {\r\n        background: none;\r\n        border: none;\r\n        color: #94a3b8;\r\n        font-size: 1.2rem;\r\n        cursor: pointer;\r\n        transition: color 0.3s;\r\n    }\r\n\r\n    .close-btn:hover {\r\n        color: #f87171;\r\n    }\r\n\r\n    .history-list {\r\n        flex: 1;\r\n        overflow-y: auto;\r\n        padding: 20px 15px;\r\n    }\r\n\r\n    .empty-history {\r\n        text-align: center;\r\n        padding: 50px 20px;\r\n        color: #94a3b8;\r\n    }\r\n\r\n    .empty-history i {\r\n        font-size: 3.5rem;\r\n        margin-bottom: 20px;\r\n        opacity: 0.5;\r\n    }\r\n\r\n    .history-item {\r\n        display: flex;\r\n        padding: 15px;\r\n        border-radius: 12px;\r\n        background: rgba(15, 23, 42, 0.4);\r\n        margin-bottom: 15px;\r\n        cursor: pointer;\r\n        transition: all 0.3s;\r\n        border: 1px solid rgba(94, 234, 212, 0.1);\r\n        position: relative;\r\n    }\r\n\r\n    .history-item:hover {\r\n        background: rgba(56, 189, 248, 0.1);\r\n        transform: translateX(-5px);\r\n    }\r\n\r\n    .history-item.active {\r\n        border: 1px solid #38bdf8;\r\n        background: rgba(56, 189, 248, 0.15);\r\n    }\r\n\r\n    .item-thumbnail {\r\n        width: 70px;\r\n        height: 70px;\r\n        border-radius: 8px;\r\n        overflow: hidden;\r\n        margin-right: 15px;\r\n        flex-shrink: 0;\r\n    }\r\n\r\n    .item-thumbnail img {\r\n        width: 100%;\r\n        height: 100%;\r\n        object-fit: cover;\r\n    }\r\n\r\n    .item-info {\r\n        flex: 1;\r\n    }\r\n\r\n    .item-title {\r\n        color: #f8fafc;\r\n        font-weight: 600;\r\n        margin-bottom: 5px;\r\n    }\r\n\r\n    .item-time {\r\n        color: #38bdf8;\r\n        font-size: 0.8rem;\r\n        margin-bottom: 8px;\r\n    }\r\n\r\n    .item-preview {\r\n        color: #94a3b8;\r\n        font-size: 0.9rem;\r\n        line-height: 1.4;\r\n    }\r\n\r\n    .delete-btn {\r\n        position: absolute;\r\n        bottom: 15px;\r\n        right: 15px;\r\n        background: none;\r\n        border: none;\r\n        color: #94a3b8;\r\n        cursor: pointer;\r\n        transition: color 0.3s;\r\n    }\r\n\r\n    .delete-btn:hover {\r\n        color: #f87171;\r\n    }\r\n    .loading-history {\r\n        text-align: center;\r\n        padding: 50px 20px;\r\n        color: #94a3b8;\r\n    }\r\n\r\n    .loading-history .spinner {\r\n        width: 40px;\r\n        height: 40px;\r\n        border: 4px solid rgba(56, 189, 248, 0.2);\r\n        border-top: 4px solid #38bdf8;\r\n        border-radius: 50%;\r\n        animation: spin 1s linear infinite;\r\n        margin: 0 auto 20px;\r\n    }\r\n\r\n    @keyframes spin {\r\n        0% { transform: rotate(0deg); }\r\n        100% { transform: rotate(360deg); }\r\n    }\r\n    /* 移动端侧边栏优化 */\r\n    @media (max-width: 768px) {\r\n        .history-sidebar {\r\n            width: 100%;\r\n            max-width: 100%;\r\n        }\r\n\r\n        .history-item {\r\n            padding: 10px;\r\n        }\r\n\r\n        .item-thumbnail {\r\n            width: 50px;\r\n            height: 50px;\r\n        }\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n        .history-sidebar {\r\n            width: 100%;\r\n            max-width: 100%;\r\n        }\r\n\r\n        .sidebar-header {\r\n            padding: 15px 20px;\r\n        }\r\n\r\n        .history-item {\r\n            padding: 10px;\r\n        }\r\n\r\n        .item-thumbnail {\r\n            width: 50px;\r\n            height: 50px;\r\n        }\r\n\r\n        .item-title {\r\n            font-size: 0.9rem;\r\n        }\r\n\r\n        .item-time {\r\n            font-size: 0.7rem;\r\n        }\r\n\r\n        .item-preview {\r\n            font-size: 0.8rem;\r\n        }\r\n    }\r\n</style>","import script from \"./HistorySidebar.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HistorySidebar.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HistorySidebar.vue?vue&type=style&index=0&id=4249156e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4249156e\"]])\n\nexport default __exports__","<template>\n  <div class=\"container\">\n    <div class=\"app-card\">\n      <!-- 右上角积分和秘钥控制区 -->\n      <div class=\"control-corner\">\n       <!-- <div class=\"points-mini\">\n          <i class=\"fas fa-coins\"></i>\n          <span>{{ store.points }}</span>\n        </div>-->\n       <!-- <div class=\"key-btn\" @click=\"store.showKeyModal = true\" title=\"管理积分秘钥\">\n          <i class=\"fas fa-key\"></i>\n        </div>-->\n       <!-- <div class=\"service-btn\" @click=\"store.showServiceModal = true\" title=\"联系客服\">\n          <i class=\"fas fa-headset\"></i>\n        </div>-->\n        <!-- 新增历史记录按钮 -->\n        <div class=\"history-btn\" @click=\"store.showHistorySidebar = true\" title=\"历史记录\">\n          <i class=\"fas fa-history\"></i>\n          <!-- 如果有历史记录，显示徽章 -->\n          <span v-if=\"store.history.length > 0\" class=\"history-badge\">{{ store.history.length }}</span>\n        </div>\n      </div>\n\n      <Header />\n\n      <div class=\"main-content\">\n        <UploadSection />\n        <ResultSection />\n      </div>\n    </div>\n  </div>\n\n  <KeyModal v-if=\"store.showKeyModal\" />\n  <ServiceModal v-if=\"store.showServiceModal\" />\n  <InsufficientModal v-if=\"store.showInsufficientModal\" />\n  <!-- 新增历史记录侧边栏 -->\n  <HistorySidebar v-if=\"store.showHistorySidebar\" />\n</template>\n\n<script setup>\n  import {onMounted } from 'vue'; // 导入 onMounted\n  import { useAppStore } from './store'\n  import Header from './components/Header.vue'\n  import UploadSection from './components/UploadSection.vue'\n  import ResultSection from './components/ResultSection.vue'\n  import KeyModal from './components/KeyModal.vue'\n  import ServiceModal from './components/ServiceModal.vue'\n  import InsufficientModal from './components/InsufficientModal.vue'\n  import HistorySidebar from './components/HistorySidebar.vue' // 引入新组件\n\n  const store = useAppStore()\n\n\n  // 页面加载时确保初始化用户ID和积分\n  onMounted(() => {\n    // 确保初始化store\n    if (!store.userId) {\n      store.initUserId();\n    }\n\n  });\n  // 初始化时加载保存的数据\n  /*store.$subscribe((mutation, state) => {\n    if (mutation.storeId === 'app') {\n      localStorage.setItem('mathAppPoints', state.points.toString())\n      localStorage.setItem('mathAppSecretKey', state.secretKey)\n    }\n  })*/\n</script>\n\n<style scoped>\n  .container {\n    width: 100%;\n    margin: 0 auto;\n  }\n\n  .app-card {\n    background: rgba(15, 23, 42, 0.85);\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    overflow: hidden;\n    padding: 30px;\n    position: relative;\n    border: 1px solid rgba(94, 234, 212, 0.1);\n    backdrop-filter: blur(10px);\n    padding-top:15px;\n  }\n\n  .app-card::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 4px;\n    background: linear-gradient(90deg, #0ea5e9, #8b5cf6, #ec4899);\n    border-radius: 16px 16px 0 0;\n  }\n\n  .control-corner {\n    position: absolute;\n    top: 25px;\n    right: 25px;\n    display: flex;\n    gap: 15px;\n    z-index: 10;\n  }\n\n  .points-mini {\n    background: rgba(30, 41, 59, 0.8);\n    border-radius: 50px;\n    padding: 8px 16px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    border: 1px solid rgba(94, 234, 212, 0.15);\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n  }\n\n  .points-mini i {\n    color: #fbbf24;\n    font-size: 1.1rem;\n  }\n\n  .points-mini span {\n    font-weight: 600;\n    color: #f8fafc;\n    font-size: 1.1rem;\n  }\n\n  .key-btn, .service-btn {\n    background: rgba(30, 41, 59, 0.8);\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid rgba(94, 234, 212, 0.15);\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n    cursor: pointer;\n    transition: all 0.3s;\n  }\n\n  .key-btn:hover, .service-btn:hover {\n    background: rgba(51, 65, 85, 0.8);\n    transform: translateY(-2px);\n  }\n\n  .key-btn i {\n    color: #818cf8;\n    font-size: 1.2rem;\n  }\n\n  .service-btn i {\n    color: #ec4899;\n    font-size: 1.2rem;\n  }\n\n  .main-content {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 30px;\n/*    margin-top: 20px;*/\n  }\n\n  @media (max-width: 900px) {\n    .main-content {\n      grid-template-columns: 1fr;\n    }\n  }\n\n  @media (max-width: 768px) {\n    .app-card {\n      padding: 25px 20px;\n    }\n  }\n  /* 新增历史记录按钮样式 */\n  .history-btn {\n    background: rgba(30, 41, 59, 0.8);\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid rgba(94, 234, 212, 0.15);\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\n    cursor: pointer;\n    transition: all 0.3s;\n    position: relative;\n  }\n\n  .history-btn:hover {\n    background: rgba(51, 65, 85, 0.8);\n    transform: translateY(-2px);\n  }\n\n  .history-btn i {\n    color: #8b5cf6;\n    font-size: 1.2rem;\n  }\n\n  .history-badge {\n    position: absolute;\n    top: -5px;\n    right: -5px;\n    background: #ef4444;\n    color: white;\n    border-radius: 50%;\n    width: 18px;\n    height: 18px;\n    font-size: 0.7rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n  /* 新增整体布局优化 */\n  .container {\n    height: 100vh; /* 全屏高度 */\n    overflow: hidden; /* 隐藏全局滚动条 */\n  }\n\n  .app-card {\n    height: 100%; /* 继承全屏高度 */\n    display: flex;\n    flex-direction: column;\n  }\n\n  .main-content {\n    flex: 1; /* 占据剩余空间 */\n    min-height: 0; /* 关键：允许内容区域收缩 */\n  }\n\n  @media (max-width: 768px) {\n    .control-corner {\n      top: 15px;\n      right: 15px;\n      gap: 10px;\n    }\n\n    .history-btn, .key-btn, .service-btn {\n      width: 36px;\n      height: 36px;\n    }\n\n    .history-btn i, .key-btn i, .service-btn i {\n      font-size: 1rem;\n    }\n\n    .history-badge {\n      width: 16px;\n      height: 16px;\n      font-size: 0.6rem;\n    }\n\n    .main-content {\n      gap: 20px;\n    }\n  }\n\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=94844036&scoped=true&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-94844036\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport { createPinia } from 'pinia'\nimport App from './App.vue'\nimport './assets/style.css'\n\nconst app = createApp(App)\napp.use(createPinia())\napp.mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkinsect2\"] = self[\"webpackChunkinsect2\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(1834); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["CozeImageIdentifier","chatId","conversationId","isIdentifying","answer","config","localServerBaseURL","remoteServerURL","cozeFileUploadURL","cozeChatURL","botId","userId","pollInterval","maxPollAttempts","mobileCheckRegex","setConfig","newConfig","Object","assign","uploadToCoze","async","file","token","formData","FormData","append","response","axios","post","headers","data","id","sendQuery","fileId","requestData","bot_id","user_id","stream","auto_save_history","additional_messages","role","content","JSON","stringify","type","file_id","content_type","Authorization","conversation_id","pollForResult","pollUrl","status","attempts","Promise","resolve","setTimeout","get","error","console","Error","getConversationContent","contentUrl","responseData","log","forEach","item","replace","identifyImage","success","previewUrl","analysisResult","message","getStatus","useAppStore","defineStore","state","points","parseCost","showKeyModal","secretKey","showKey","imageUrl","result","formattedResult","isProcessing","processingTime","showServiceModal","showInsufficientModal","formulaRendered","workflow_id","imgFile","errorMessage","isHistoryLoaded","sampleResults","redeemedKeys","parse","localStorage","getItem","keyUsageHistory","history","historyData","e","showHistorySidebar","activeHistory","taobaoLinks","actions","initUserId","Math","random","toString","substring","Date","now","setItem","this","savedPoints","parseInt","getDeviceId","deviceId","crypto","randomUUID","addPoints","amount","fetch","method","body","operation","consumePoints","initMathJax","window","MathJax","tex","inlineMath","displayMath","processEscapes","processEnvironments","options","skipHtmlTags","ignoreHtmlClass","startup","typeset","svg","fontCache","processImageFile","match","alert","size","reader","FileReader","onload","target","readAsDataURL","parseImage","timer","setInterval","clearInterval","parsedResult","output","length","map","index","statusColors","answered","correct","isCorrect","neutral","answerStyle","optionsHtml","entries","key","value","join","question","analysis","renderMathJax","jsonError","handleParseError","randomIndex","floor","nextTick","typesetClear","typesetPromise","mathError","errorMsg","saveKey","copyWechat","navigator","clipboard","writeText","then","catch","err","openTaobao","open","buyPoints","url","validateKey","json","valid","validateKeyNew","parameters","input","ok","currentObj","outputJson","parseFloat","key_points","addToHistory","compressImage","Array","isArray","pop","unshift","saveHistoryToLocalStorage","dataUrl","img","Image","canvas","document","createElement","ctx","getContext","maxWidth","maxHeight","width","height","drawImage","toDataURL","src","removeHistory","filter","loadHistory","loadKeyHistory","saveRedeemedKey","push","date","toISOString","lastRedeemedPoints","init","savedKey","warn","class","_createElementBlock","_hoisted_1","_cache","_createElementVNode","script","__exports__","render","isMobile","ref","test","userAgent","store","isZoomed","scale","onMounted","mediaDevices","toggleZoom","zoomIn","zoomOut","resetZoom","triggerFileInput","getElementById","click","handleImageUpload","event","files","handleDrop","preventDefault","dataTransfer","mathContainer","showSaveStatus","saveStatusMessage","saveStatusClass","saveStatusIcon","watch","wasProcessing","saveResult","copyMathContent","textarea","textContent","style","position","opacity","appendChild","select","execCommand","removeChild","showCopyFeedback","icon","querySelector","classList","remove","add","color","timestamp","redeemCode","redeemMessage","redeemError","isRedeeming","keyHistory","maskKey","slice","formatDate","dateString","toLocaleString","handleKeyInput","price","redeemPoints","some","k","showMessage","validation","isError","copyRedeemCode","loading","loadHistoryFromStorage","savedHistory","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","truncateText","text","curItems","String","plainText","deleteHistory","app","createApp","App","use","createPinia","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","keys","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}